"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[9187],{49187:(t,e,r)=>{r.r(e),r.d(e,{default:()=>O});var n=r(89379),i=r(96446),a=r(85865),o=r(63336),l=r(54669),c=r(24056),s=r(11906),h=r(68903),d=r(55487),u=r(65043),x=r(50108),f=r(75748),g=r(87734),y=r(52185),p=r(92647),v=r(6026),m=r(86150),b=r(21327),j=r(90168),A=r(60163),E=r(4240),F=r(17869),w=r(98421),k=r(84033),C=r(70579);const B={"\u0102n u\u1ed1ng":"#FF6B6B","Di chuy\u1ec3n":"#4ECDC4","Mua s\u1eafm":"#45B7D1","Gi\u1ea3i tr\xed":"#96CEB4","H\xf3a \u0111\u01a1n & Ti\u1ec7n \xedch":"#FFEEAD","X\u0103ng xe":"#FFD93D","Ti\u1ebft ki\u1ec7m":"#6C5CE7","L\u01b0\u01a1ng":"#A8E6CF","Th\u01b0\u1edfng":"#DCEDC1","\u0110\u1ea7u t\u01b0":"#FFB6B9","Kh\xe1c":"#957DAD"},D=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD","#FFD93D","#6C5CE7","#A8E6CF","#DCEDC1","#FFB6B9","#957DAD","#D4A5A5","#89C4F4","#F5B7B1","#82E0AA"],O=()=>{const{darkMode:t}=(0,w.w)(),[e,r]=(0,u.useState)(!0),[O,P]=(0,u.useState)("month"),[z,S]=(0,u.useState)([]),[N,W]=(0,u.useState)({totalIncome:0,totalExpense:0,netBalance:0,trendData:[]});(0,u.useEffect)((()=>{(async()=>{try{r(!0);const t=await k.A.get("/api/transactions/trend?filter=".concat(O));W(t.data)}catch(t){console.error("L\u1ed7i khi l\u1ea5y xu h\u01b0\u1edbng:",t),W({totalIncome:0,totalExpense:0,netBalance:0,trendData:[]})}finally{r(!1)}})()}),[O]),(0,u.useEffect)((()=>{(async()=>{try{const t=(await k.A.get("/api/transactions/category-summary")).data.map(((t,e)=>(0,n.A)((0,n.A)({},t),{},{color:B[t.category]||D[e%D.length]})));S(t)}catch(t){console.error("L\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u ph\xe2n t\xedch:",t),S([])}})()}),[]);const T=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t);return(0,C.jsx)(i.A,{sx:{p:{xs:1,sm:2,md:3},background:t?"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)":"linear-gradient(135deg, #F1F5F9 0%, #E2E8F0 100%)",minHeight:"100vh"},children:(0,C.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,C.jsx)(a.A,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700,color:t?"#E2E8F0":"#1E293B",background:"linear-gradient(45deg, #3B82F6, #7C3AED)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Ph\xe2n t\xedch xu h\u01b0\u1edbng chi ti\xeau"}),(0,C.jsxs)(i.A,{sx:{display:"flex",gap:4,mb:2,flexWrap:"wrap"},children:[(0,C.jsxs)(o.A,{sx:{p:2,minWidth:180,bgcolor:t?"#1E293B":"#F1F5F9"},children:[(0,C.jsx)(a.A,{variant:"subtitle2",color:"primary",children:"T\u1ed5ng thu nh\u1eadp"}),(0,C.jsx)(a.A,{variant:"h6",sx:{color:"#22C55E"},children:T(N.totalIncome)})]}),(0,C.jsxs)(o.A,{sx:{p:2,minWidth:180,bgcolor:t?"#1E293B":"#F1F5F9"},children:[(0,C.jsx)(a.A,{variant:"subtitle2",color:"error",children:"T\u1ed5ng chi ti\xeau"}),(0,C.jsx)(a.A,{variant:"h6",sx:{color:"#EF4444"},children:T(N.totalExpense)})]}),(0,C.jsxs)(o.A,{sx:{p:2,minWidth:180,bgcolor:t?"#1E293B":"#F1F5F9"},children:[(0,C.jsx)(a.A,{variant:"subtitle2",color:"secondary",children:"S\u1ed1 d\u01b0 r\xf2ng"}),(0,C.jsx)(a.A,{variant:"h6",sx:{color:N.netBalance>=0?"#22C55E":"#EF4444"},children:T(N.netBalance)})]})]}),(0,C.jsx)(i.A,{sx:{mb:2},children:(0,C.jsxs)(l.A,{value:O,onChange:(t,e)=>P(e),sx:{"& .MuiTab-root":{color:t?"#CBD5E1":"#64748B",fontWeight:500}},children:[(0,C.jsx)(c.A,{label:"Ng\xe0y",value:"day"}),(0,C.jsx)(c.A,{label:"Tu\u1ea7n",value:"week"}),(0,C.jsx)(c.A,{label:"Th\xe1ng",value:"month"})]})}),(0,C.jsxs)(o.A,{sx:{p:3,borderRadius:"12px",bgcolor:t?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.98)",boxShadow:t?"0 5px 15px rgba(0,0,0,0.5)":"0 5px 15px rgba(0,0,0,0.1)"},children:[e?(0,C.jsx)(a.A,{children:"\u0110ang t\u1ea3i..."}):N.trendData.length>0?(0,C.jsx)(x.u,{width:"100%",height:400,children:(0,C.jsxs)(f.b,{data:N.trendData,margin:{top:20,right:30,left:40,bottom:40},children:[(0,C.jsx)(g.d,{strokeDasharray:"3 3",stroke:t?"#4B5563":"#E5E7EB"}),(0,C.jsx)(y.W,{dataKey:"name",stroke:t?"#CBD5E1":"#64748B",children:(0,C.jsx)(p.J,{value:"day"===O?"Ng\xe0y":"week"===O?"Tu\u1ea7n":"Th\xe1ng",offset:-10,position:"insideBottom"})}),(0,C.jsx)(v.h,{stroke:t?"#CBD5E1":"#64748B",tickFormatter:t=>T(t).split(",")[0],children:(0,C.jsx)(p.J,{value:"S\u1ed1 ti\u1ec1n (VND)",angle:-90,position:"insideLeft"})}),(0,C.jsx)(m.m,{formatter:t=>T(t),contentStyle:{background:t?"#1E293B":"#fff",borderRadius:"8px",border:"none"}}),(0,C.jsx)(b.s,{verticalAlign:"top",height:36}),(0,C.jsx)(j.N,{type:"monotone",dataKey:"income",name:"Thu nh\u1eadp",stroke:"#22C55E",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),(0,C.jsx)(j.N,{type:"monotone",dataKey:"expense",name:"Chi ti\xeau",stroke:"#EF4444",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})}):(0,C.jsx)(a.A,{sx:{textAlign:"center",color:t?"#CBD5E1":"#64748B"},children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u xu h\u01b0\u1edbng."}),(0,C.jsx)(s.A,{variant:"contained",sx:{mt:2,bgcolor:"linear-gradient(45deg, #3B82F6 30%, #7C3AED 90%)",color:"#fff",borderRadius:"8px",fontWeight:600},onClick:()=>console.log("T\u1ea3i b\xe1o c\xe1o chi ti\u1ebft"),children:"T\u1ea3i b\xe1o c\xe1o"})]}),(0,C.jsxs)(o.A,{sx:{p:3,borderRadius:"12px",bgcolor:t?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.98)",boxShadow:t?"0 5px 15px rgba(0,0,0,0.5)":"0 5px 15px rgba(0,0,0,0.1)",mt:2},children:[(0,C.jsx)(a.A,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"T\u1ef7 l\u1ec7 chi ti\xeau theo danh m\u1ee5c"}),z.length>0?(0,C.jsxs)(i.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4},children:[(0,C.jsx)(i.A,{sx:{flex:1,minHeight:300},children:(0,C.jsx)(x.u,{width:"100%",height:300,children:(0,C.jsxs)(A.r,{children:[(0,C.jsx)(E.F,{data:z,dataKey:"amount",nameKey:"category",cx:"50%",cy:"50%",outerRadius:100,label:t=>{let{name:e,percent:r}=t;return"".concat(e," (").concat((100*r).toFixed(0),"%)")},children:z.map(((t,e)=>(0,C.jsx)(F.f,{fill:t.color},"cell-".concat(e))))}),(0,C.jsx)(m.m,{formatter:t=>T(t),contentStyle:{backgroundColor:t?"#1E293B":"#FFFFFF",border:"none",borderRadius:"8px"}}),(0,C.jsx)(b.s,{})]})})}),(0,C.jsx)(i.A,{sx:{flex:1},children:(0,C.jsx)(h.Ay,{container:!0,spacing:2,children:z.map(((e,r)=>(0,C.jsx)(h.Ay,{item:!0,xs:12,children:(0,C.jsxs)(o.A,{sx:{p:2,display:"flex",alignItems:"center",gap:2,bgcolor:t?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)"},children:[(0,C.jsx)(i.A,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:e.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem"},children:e.icon}),(0,C.jsxs)(i.A,{sx:{flex:1},children:[(0,C.jsx)(a.A,{variant:"subtitle1",fontWeight:"bold",children:e.category}),(0,C.jsxs)(a.A,{variant:"body2",color:"text.secondary",children:[e.transactionCount," giao d\u1ecbch"]})]}),(0,C.jsxs)(i.A,{sx:{textAlign:"right"},children:[(0,C.jsx)(a.A,{variant:"subtitle1",fontWeight:"bold",children:T(e.amount)}),(0,C.jsxs)(a.A,{variant:"body2",sx:{color:e.percentage>20?"#EF4444":"#22C55E"},children:[e.percentage,"%"]})]})]})},r)))})})]}):(0,C.jsx)(a.A,{sx:{textAlign:"center",color:"text.secondary",py:4},children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u chi ti\xeau theo danh m\u1ee5c."})]})]})})}},87734:(t,e,r)=>{r.d(e,{d:()=>O});var n=r(65043),i=r(11629),a=r.n(i),o=r(155),l=r(76307),c=r(240),s=r(20202),h=r(98854),d=r(57671),u=r(52103),x=["x1","y1","x2","y2","key"],f=["offset"];function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(){return m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m.apply(this,arguments)}function b(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var j=function(t){var e=t.fill;if(!e||"none"===e)return null;var r=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return n.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function A(t,e){var r;if(n.isValidElement(t))r=n.cloneElement(t,e);else if(a()(t))r=t(e);else{var i=e.x1,o=e.y1,l=e.x2,s=e.y2,h=e.key,d=b(e,x),u=(0,c.J9)(d,!1),g=(u.offset,b(u,f));r=n.createElement("line",m({},g,{x1:i,y1:o,x2:l,y2:s,fill:"none",key:h}))}return r}function E(t){var e=t.x,r=t.width,i=t.horizontal,a=void 0===i||i,o=t.horizontalPoints;if(!a||!o||!o.length)return null;var l=o.map((function(n,i){var o=p(p({},t),{},{x1:e,y1:n,x2:e+r,y2:n,key:"line-".concat(i),index:i});return A(a,o)}));return n.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function F(t){var e=t.y,r=t.height,i=t.vertical,a=void 0===i||i,o=t.verticalPoints;if(!a||!o||!o.length)return null;var l=o.map((function(n,i){var o=p(p({},t),{},{x1:n,y1:e,x2:n,y2:e+r,key:"line-".concat(i),index:i});return A(a,o)}));return n.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function w(t){var e=t.horizontalFill,r=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.horizontalPoints,s=t.horizontal;if(!(void 0===s||s)||!e||!e.length)return null;var h=c.map((function(t){return Math.round(t+a-a)})).sort((function(t,e){return t-e}));a!==h[0]&&h.unshift(0);var d=h.map((function(t,c){var s=!h[c+1]?a+l-t:h[c+1]-t;if(s<=0)return null;var d=c%e.length;return n.createElement("rect",{key:"react-".concat(c),y:t,x:i,height:s,width:o,stroke:"none",fill:e[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})}));return n.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function k(t){var e=t.vertical,r=void 0===e||e,i=t.verticalFill,a=t.fillOpacity,o=t.x,l=t.y,c=t.width,s=t.height,h=t.verticalPoints;if(!r||!i||!i.length)return null;var d=h.map((function(t){return Math.round(t+o-o)})).sort((function(t,e){return t-e}));o!==d[0]&&d.unshift(0);var u=d.map((function(t,e){var r=!d[e+1]?o+c-t:d[e+1]-t;if(r<=0)return null;var h=e%i.length;return n.createElement("rect",{key:"react-".concat(e),x:t,y:l,width:r,height:s,stroke:"none",fill:i[h],fillOpacity:a,className:"recharts-cartesian-grid-bg"})}));return n.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var C=function(t,e){var r=t.xAxis,n=t.width,i=t.height,a=t.offset;return(0,s.PW)((0,h.f)(p(p(p({},d.u.defaultProps),r),{},{ticks:(0,s.Rh)(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},B=function(t,e){var r=t.yAxis,n=t.width,i=t.height,a=t.offset;return(0,s.PW)((0,h.f)(p(p(p({},d.u.defaultProps),r),{},{ticks:(0,s.Rh)(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},D={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function O(t){var e,r,i,c,s,h,d=(0,u.yi)(),x=(0,u.rY)(),f=(0,u.hj)(),y=p(p({},t),{},{stroke:null!==(e=t.stroke)&&void 0!==e?e:D.stroke,fill:null!==(r=t.fill)&&void 0!==r?r:D.fill,horizontal:null!==(i=t.horizontal)&&void 0!==i?i:D.horizontal,horizontalFill:null!==(c=t.horizontalFill)&&void 0!==c?c:D.horizontalFill,vertical:null!==(s=t.vertical)&&void 0!==s?s:D.vertical,verticalFill:null!==(h=t.verticalFill)&&void 0!==h?h:D.verticalFill,x:(0,l.Et)(t.x)?t.x:f.left,y:(0,l.Et)(t.y)?t.y:f.top,width:(0,l.Et)(t.width)?t.width:f.width,height:(0,l.Et)(t.height)?t.height:f.height}),v=y.x,b=y.y,A=y.width,O=y.height,P=y.syncWithTicks,z=y.horizontalValues,S=y.verticalValues,N=(0,u.pj)(),W=(0,u.$G)();if(!(0,l.Et)(A)||A<=0||!(0,l.Et)(O)||O<=0||!(0,l.Et)(v)||v!==+v||!(0,l.Et)(b)||b!==+b)return null;var T=y.verticalCoordinatesGenerator||C,R=y.horizontalCoordinatesGenerator||B,G=y.horizontalPoints,I=y.verticalPoints;if((!G||!G.length)&&a()(R)){var K=z&&z.length,V=R({yAxis:W?p(p({},W),{},{ticks:K?z:W.ticks}):void 0,width:d,height:x,offset:f},!!K||P);(0,o.R)(Array.isArray(V),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(g(V),"]")),Array.isArray(V)&&(G=V)}if((!I||!I.length)&&a()(T)){var M=S&&S.length,L=T({xAxis:N?p(p({},N),{},{ticks:M?S:N.ticks}):void 0,width:d,height:x,offset:f},!!M||P);(0,o.R)(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(g(L),"]")),Array.isArray(L)&&(I=L)}return n.createElement("g",{className:"recharts-cartesian-grid"},n.createElement(j,{fill:y.fill,fillOpacity:y.fillOpacity,x:y.x,y:y.y,width:y.width,height:y.height,ry:y.ry}),n.createElement(E,m({},y,{offset:f,horizontalPoints:G,xAxis:N,yAxis:W})),n.createElement(F,m({},y,{offset:f,verticalPoints:I,xAxis:N,yAxis:W})),n.createElement(w,m({},y,{horizontalPoints:G})),n.createElement(k,m({},y,{verticalPoints:I})))}O.displayName="CartesianGrid"}}]);
//# sourceMappingURL=9187.176cb5e2.chunk.js.map