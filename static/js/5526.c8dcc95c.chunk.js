"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[5526],{95526:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Q});var a=n(89379),r=n(17701),i=n(47805),s=n(70141),o=n(83560),l=n(51387),d=n(59540),c=n(88645),h=n(33438),u=n(12110),x=n(96446),m=n(26240),p=n(19252),g=n(85865),A=n(81637),v=n(14194),y=n(17392),j=n(11906),b=n(68903),f=n(26494),k=n(90035),C=n(26600),w=n(35316),_=n(67784),S=n(29347),W=n(40794),q=n(34535),T=n(65043),N=n(73216),R=n(84033),I=n(70579);const V=(0,q.Ay)(u.A)((t=>{let{theme:e}=t;return{borderRadius:12,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)"}}})),D=(0,q.Ay)(x.A)((t=>{let{theme:e}=t;return{background:"dark"===e.palette.mode?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:16,padding:e.spacing(3),boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"}})),P=T.forwardRef(((t,e)=>(0,I.jsx)(v.A,(0,a.A)({elevation:6,ref:e,variant:"filled"},t)))),Q=()=>{const t=(0,m.A)(),e=(0,N.Zp)(),[n,u]=(0,T.useState)([]),[q,Q]=(0,T.useState)(0),[z,H]=(0,T.useState)({name:"",target_amount:"",target_date:(new Date).toISOString().split("T")[0]}),[L,B]=(0,T.useState)(""),[G,M]=(0,T.useState)(""),[K,F]=(0,T.useState)(null),[X,O]=(0,T.useState)(null),[E,Y]=(0,T.useState)(!0),[Z,J]=(0,T.useState)(null),[U,$]=(0,T.useState)({open:!1,message:"",severity:"success"}),tt=(0,T.useCallback)((async()=>{Y(!0),J(null);try{if(!localStorage.getItem("token"))throw new Error("Kh\xf4ng t\xecm th\u1ea5y token. Vui l\xf2ng \u0111\u0103ng nh\u1eadp.");const[t,e]=await Promise.all([R.A.get("/api/savings"),R.A.get("/api/transactions")]);u(t.data||[]);const n=e.data.transactions.filter((t=>"income"===t.type)).reduce(((t,e)=>t+e.amount),0),a=e.data.transactions.filter((t=>"expense"===t.type)).reduce(((t,e)=>t+e.amount),0);Q(n-a)}catch(r){var t,n,a;const i=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Kh\xf4ng th\u1ec3 t\u1ea3i d\u1eef li\u1ec7u. Vui l\xf2ng th\u1eed l\u1ea1i.";J(i),$({open:!0,message:i,severity:"error"}),401===(null===(a=r.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("token"),e("/login"))}finally{Y(!1)}}),[e]);(0,T.useEffect)((()=>{tt()}),[tt]);const et=(t,e)=>{$({open:!0,message:t,severity:e})},nt=(t,e)=>{!e||"editGoal"!==t&&"addAmount"!==t&&"withdrawAmount"!==t&&"deleteConfirm"!==t||(O(e),"editGoal"===t&&H({name:e.name,target_amount:e.target_amount.toString(),target_date:new Date(e.target_date).toISOString().split("T")[0]})),F(t)},at=()=>{F(null),H({name:"",target_amount:"",target_date:(new Date).toISOString().split("T")[0]}),B(""),M(""),O(null)},rt=()=>{if(!z.name.trim())return et("Vui l\xf2ng nh\u1eadp t\xean qu\u1ef9","error"),!1;const t=Number(z.target_amount);return isNaN(t)||t<=0?(et("S\u1ed1 ti\u1ec1n m\u1ee5c ti\xeau ph\u1ea3i l\u1edbn h\u01a1n 0","error"),!1):!!z.target_date||(et("Vui l\xf2ng ch\u1ecdn ng\xe0y ho\xe0n th\xe0nh","error"),!1)},it=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(t);return(0,I.jsxs)(x.A,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, ".concat(t.palette.primary.light,"15 0%, ").concat(t.palette.background.default," 100%)"),pb:8},children:[(0,I.jsx)(D,{sx:{background:"linear-gradient(135deg, ".concat(t.palette.primary.main," 0%, ").concat(t.palette.primary.dark," 100%)"),color:"white",py:4,px:2,mb:4,borderRadius:{xs:0,sm:"0 0 24px 24px"}},children:(0,I.jsxs)(p.A,{maxWidth:"lg",children:[(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[(0,I.jsx)(r.A,{sx:{fontSize:36,mr:1}}),(0,I.jsx)(g.A,{variant:"h4",fontWeight:"bold",children:"Qu\u1ef9 Ti\u1ebft Ki\u1ec7m"})]}),(0,I.jsx)(g.A,{variant:"subtitle1",textAlign:"center",sx:{mb:3,opacity:.9},children:"Qu\u1ea3n l\xfd m\u1ee5c ti\xeau ti\u1ebft ki\u1ec7m v\xe0 theo d\xf5i ti\u1ebfn \u0111\u1ed9 c\u1ee7a b\u1ea1n"}),(0,I.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E?(0,I.jsxs)(g.A,{variant:"h6",fontWeight:"bold",children:["S\u1ed1 d\u01b0: ",(0,I.jsx)(A.A,{size:20,color:"inherit"})]}):Z?(0,I.jsx)(v.A,{severity:"error",sx:{width:"100%"},children:Z}):(0,I.jsxs)(g.A,{variant:"h6",fontWeight:"bold",children:["S\u1ed1 d\u01b0 v\xed: ",it(q)]}),(0,I.jsxs)(x.A,{sx:{display:"flex",gap:1},children:[(0,I.jsx)(y.A,{color:"inherit",onClick:tt,sx:{bgcolor:"rgba(255, 255, 255, 0.2)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.3)"}},children:(0,I.jsx)(i.A,{})}),(0,I.jsx)(j.A,{variant:"contained",startIcon:(0,I.jsx)(s.A,{}),onClick:()=>nt("addGoal"),sx:{bgcolor:"white",color:t.palette.primary.main,fontWeight:"bold",px:3,py:1.2,borderRadius:2,"&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},children:"Th\xeam Qu\u1ef9 M\u1edbi"})]})]})]})}),(0,I.jsx)(p.A,{maxWidth:"lg",children:E&&0===n.length?(0,I.jsx)(x.A,{sx:{display:"flex",justifyContent:"center",py:8},children:(0,I.jsx)(A.A,{})}):n.length>0?(0,I.jsx)(b.Ay,{container:!0,spacing:3,children:n.map((e=>{const n=Math.min(e.current_amount/e.target_amount*100,100),a=(t=>{const e=new Date;e.setHours(0,0,0,0);const n=new Date(t);n.setHours(0,0,0,0);const a=n.getTime()-e.getTime();return Math.ceil(a/864e5)})(e.target_date),r=n>=100,i=a<0,s=e.target_amount-e.current_amount;return(0,I.jsx)(b.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,I.jsxs)(V,{sx:{border:r?"2px solid ".concat(t.palette.success.main):i?"2px solid ".concat(t.palette.error.main):"1px solid ".concat(t.palette.divider)},children:[(0,I.jsx)(x.A,{sx:{p:2,bgcolor:r?"".concat(t.palette.success.light,"20"):i?"".concat(t.palette.error.light,"20"):t.palette.background.paper},children:(0,I.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,I.jsx)(g.A,{variant:"h6",fontWeight:"bold",sx:{color:r?t.palette.success.dark:i?t.palette.error.dark:t.palette.primary.main},children:e.name}),(0,I.jsxs)(x.A,{children:[(0,I.jsx)(y.A,{size:"small",onClick:()=>nt("editGoal",e),sx:{mr:.5},children:(0,I.jsx)(o.A,{fontSize:"small"})}),(0,I.jsx)(y.A,{size:"small",color:"error",onClick:()=>nt("deleteConfirm",e),children:(0,I.jsx)(l.A,{fontSize:"small"})})]})]})}),(0,I.jsxs)(f.A,{children:[(0,I.jsx)(x.A,{sx:{display:"flex",justifyContent:"center",my:2},children:(0,I.jsxs)(x.A,{sx:{position:"relative",display:"inline-flex"},children:[(0,I.jsx)(A.A,{variant:"determinate",value:n,size:120,thickness:5,sx:{color:r?t.palette.success.main:i?t.palette.error.main:t.palette.primary.main}}),(0,I.jsx)(x.A,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:(0,I.jsxs)(g.A,{variant:"h6",fontWeight:"bold",color:"text.primary",children:[n.toFixed(0),"%"]})})]})}),(0,I.jsxs)(b.Ay,{container:!0,spacing:1,children:[(0,I.jsxs)(b.Ay,{item:!0,xs:6,children:[(0,I.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"\u0110\xe3 ti\u1ebft ki\u1ec7m:"}),(0,I.jsx)(g.A,{variant:"body1",fontWeight:"bold",color:"success.main",children:it(e.current_amount||0)})]}),(0,I.jsxs)(b.Ay,{item:!0,xs:6,children:[(0,I.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"M\u1ee5c ti\xeau:"}),(0,I.jsx)(g.A,{variant:"body1",fontWeight:"bold",children:it(e.target_amount)})]}),(0,I.jsxs)(b.Ay,{item:!0,xs:6,children:[(0,I.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"C\xf2n l\u1ea1i:"}),(0,I.jsx)(g.A,{variant:"body1",fontWeight:"bold",color:"warning.main",children:it(s>0?s:0)})]}),(0,I.jsxs)(b.Ay,{item:!0,xs:6,children:[(0,I.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"H\u1ea1n ho\xe0n th\xe0nh:"}),(0,I.jsxs)(g.A,{variant:"body1",fontWeight:"medium",color:i?"error.main":"text.primary",children:[(h=e.target_date,new Date(h).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})),i?(0,I.jsxs)(g.A,{component:"span",color:"error",fontWeight:"medium",children:[" ","(Qu\xe1 h\u1ea1n ",Math.abs(a)," ng\xe0y)"]}):(0,I.jsxs)(g.A,{component:"span",color:"text.secondary",fontWeight:"medium",children:[" ","(C\xf2n ",a," ng\xe0y)"]})]})]})]}),(0,I.jsxs)(x.A,{sx:{mt:3,display:"flex",gap:1},children:[(0,I.jsx)(j.A,{variant:"contained",fullWidth:!0,startIcon:(0,I.jsx)(d.A,{}),onClick:()=>nt("addAmount",e),disabled:r,sx:{borderRadius:2,py:1.2,bgcolor:r?t.palette.success.main:t.palette.primary.main,"&:hover":{bgcolor:r?t.palette.success.dark:t.palette.primary.dark}},children:"Th\xeam Ti\u1ec1n"}),(0,I.jsx)(j.A,{variant:"outlined",fullWidth:!0,startIcon:(0,I.jsx)(c.A,{}),onClick:()=>nt("withdrawAmount",e),disabled:e.current_amount<=0,sx:{borderRadius:2,py:1.2,borderColor:t.palette.grey[400],color:t.palette.text.primary,"&:hover":{borderColor:t.palette.grey[600],bgcolor:t.palette.grey[100]}},children:"R\xfat Ti\u1ec1n"})]})]})]})},e._id);var h}))}):(0,I.jsxs)(D,{sx:{textAlign:"center",py:8,px:2},children:[(0,I.jsx)(r.A,{sx:{fontSize:60,color:"text.disabled",mb:2}}),(0,I.jsx)(g.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Ch\u01b0a c\xf3 qu\u1ef9 ti\u1ebft ki\u1ec7m n\xe0o"}),(0,I.jsx)(g.A,{variant:"body1",color:"text.secondary",mb:3,children:"H\xe3y b\u1eaft \u0111\u1ea7u b\u1eb1ng vi\u1ec7c t\u1ea1o m\u1ed9t qu\u1ef9 ti\u1ebft ki\u1ec7m cho m\u1ee5c ti\xeau c\u1ee7a b\u1ea1n!"}),(0,I.jsx)(j.A,{variant:"contained",startIcon:(0,I.jsx)(s.A,{}),onClick:()=>nt("addGoal"),sx:{borderRadius:2,px:3,py:1},children:"Th\xeam Qu\u1ef9 M\u1edbi"})]})}),(0,I.jsxs)(k.A,{open:"addGoal"===K||"editGoal"===K,onClose:at,fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:3,p:2}},children:[(0,I.jsx)(C.A,{children:(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,I.jsx)(g.A,{variant:"h6",fontWeight:"bold",children:"addGoal"===K?"Th\xeam Qu\u1ef9 Ti\u1ebft Ki\u1ec7m M\u1edbi":"Ch\u1ec9nh S\u1eeda Qu\u1ef9 Ti\u1ebft Ki\u1ec7m"}),(0,I.jsx)(y.A,{onClick:at,size:"small",children:(0,I.jsx)(h.A,{})})]})}),(0,I.jsxs)(w.A,{children:[(0,I.jsx)(_.A,{label:"T\xean qu\u1ef9 ti\u1ebft ki\u1ec7m",value:z.name,onChange:t=>H((0,a.A)((0,a.A)({},z),{},{name:t.target.value})),fullWidth:!0,margin:"normal",autoFocus:!0,placeholder:"V\xed d\u1ee5: Mua xe, Du l\u1ecbch, Ti\u1ec1n h\u1ecdc...",variant:"outlined"}),(0,I.jsx)(_.A,{label:"S\u1ed1 ti\u1ec1n m\u1ee5c ti\xeau (VND)",type:"number",value:z.target_amount,onChange:t=>H((0,a.A)((0,a.A)({},z),{},{target_amount:t.target.value})),fullWidth:!0,margin:"normal",placeholder:"V\xed d\u1ee5: 10000000",InputProps:{inputProps:{min:1}},variant:"outlined"}),(0,I.jsx)(_.A,{label:"Ng\xe0y ho\xe0n th\xe0nh",type:"date",value:z.target_date,onChange:t=>H((0,a.A)((0,a.A)({},z),{},{target_date:t.target.value})),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined"})]}),(0,I.jsxs)(S.A,{sx:{px:3,py:2},children:[(0,I.jsx)(j.A,{variant:"outlined",onClick:at,sx:{borderRadius:2,px:3},children:"H\u1ee7y"}),(0,I.jsx)(j.A,{variant:"contained",onClick:"addGoal"===K?async()=>{if(rt())try{Y(!0),await R.A.post("/api/savings",{name:z.name,target_amount:Number(z.target_amount),target_date:z.target_date}),await tt(),at(),et("Th\xeam qu\u1ef9 ti\u1ebft ki\u1ec7m th\xe0nh c\xf4ng","success")}catch(n){var t,e;console.error("\u274c L\u1ed7i th\xeam qu\u1ef9:",n),et((null===(t=n.response)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message)||"L\u1ed7i th\xeam qu\u1ef9","error")}finally{Y(!1)}}:async()=>{if(X&&rt())try{Y(!0),await R.A.put("/api/savings/".concat(X._id),{name:z.name,target_amount:Number(z.target_amount),target_date:z.target_date}),await tt(),at(),et("C\u1eadp nh\u1eadt qu\u1ef9 ti\u1ebft ki\u1ec7m th\xe0nh c\xf4ng","success")}catch(n){var t,e;console.error("\u274c L\u1ed7i c\u1eadp nh\u1eadt qu\u1ef9:",n),et((null===(t=n.response)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message)||"L\u1ed7i c\u1eadp nh\u1eadt qu\u1ef9","error")}finally{Y(!1)}},sx:{borderRadius:2,px:3},children:"addGoal"===K?"T\u1ea1o Qu\u1ef9":"C\u1eadp Nh\u1eadt"})]})]}),(0,I.jsxs)(k.A,{open:"addAmount"===K&&!!X,onClose:at,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{borderRadius:3,p:2}},children:[(0,I.jsx)(C.A,{children:(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,I.jsx)(g.A,{variant:"h6",fontWeight:"bold",children:"Th\xeam Ti\u1ec1n V\xe0o Qu\u1ef9"}),(0,I.jsx)(y.A,{onClick:at,size:"small",children:(0,I.jsx)(h.A,{})})]})}),(0,I.jsxs)(w.A,{children:[X&&(0,I.jsxs)(x.A,{sx:{mb:2},children:[(0,I.jsxs)(g.A,{variant:"subtitle1",fontWeight:"medium",gutterBottom:!0,children:["Qu\u1ef9: ",X.name]}),(0,I.jsxs)(g.A,{variant:"body2",color:"text.secondary",children:["Hi\u1ec7n t\u1ea1i: ",it(X.current_amount||0)]}),(0,I.jsxs)(g.A,{variant:"body2",color:"text.secondary",children:["M\u1ee5c ti\xeau: ",it(X.target_amount||0)]}),(0,I.jsxs)(g.A,{variant:"body2",color:"text.secondary",children:["S\u1ed1 d\u01b0 v\xed: ",it(q)]})]}),(0,I.jsx)(_.A,{label:"S\u1ed1 ti\u1ec1n th\xeam v\xe0o (VND)",type:"number",value:L,onChange:t=>B(t.target.value),fullWidth:!0,autoFocus:!0,helperText:"Nh\u1eadp s\u1ed1 ti\u1ec1n b\u1ea1n mu\u1ed1n th\xeam v\xe0o qu\u1ef9",InputProps:{inputProps:{min:1,max:q}},variant:"outlined"})]}),(0,I.jsxs)(S.A,{sx:{px:3,py:2},children:[(0,I.jsx)(j.A,{variant:"outlined",onClick:at,sx:{borderRadius:2,px:3},children:"H\u1ee7y"}),(0,I.jsx)(j.A,{variant:"contained",onClick:async()=>{if(!X)return et("Kh\xf4ng c\xf3 qu\u1ef9 \u0111\u01b0\u1ee3c ch\u1ecdn","error"),void at();const t=Number(L);if(isNaN(t)||t<=0)et("S\u1ed1 ti\u1ec1n kh\xf4ng h\u1ee3p l\u1ec7","error");else if(t>q)et("S\u1ed1 d\u01b0 v\xed kh\xf4ng \u0111\u1ee7 \u0111\u1ec3 th\xeam v\xe0o qu\u1ef9","error");else try{Y(!0);const e=await R.A.patch("/api/savings/".concat(X._id,"/add"),{amount:t});void 0!==e.data.newBalance&&Q(e.data.newBalance),u((t=>t.map((t=>t._id===X._id?e.data.saving:t)))),at(),et("Th\xeam ".concat(it(t)," v\xe0o qu\u1ef9 th\xe0nh c\xf4ng"),"success")}catch(r){var e,n,a;console.error("\u274c L\u1ed7i th\xeam ti\u1ec1n:",r);const t=404===(null===(e=r.response)||void 0===e?void 0:e.status)?"Qu\u1ef9 ti\u1ebft ki\u1ec7m kh\xf4ng t\u1ed3n t\u1ea1i":400===(null===(n=r.response)||void 0===n?void 0:n.status)?r.response.data.message||"S\u1ed1 d\u01b0 v\xed kh\xf4ng \u0111\u1ee7 ho\u1eb7c d\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7":500===(null===(a=r.response)||void 0===a?void 0:a.status)?"L\u1ed7i server: Vui l\xf2ng ki\u1ec3m tra c\u1ea5u h\xecnh ho\u1eb7c li\xean h\u1ec7 h\u1ed7 tr\u1ee3.":"Kh\xf4ng th\u1ec3 th\xeam ti\u1ec1n v\xe0o qu\u1ef9. Vui l\xf2ng th\u1eed l\u1ea1i.";et(t,"error")}finally{Y(!1)}},sx:{borderRadius:2,px:3},children:"X\xe1c Nh\u1eadn"})]})]}),(0,I.jsxs)(k.A,{open:"withdrawAmount"===K&&!!X,onClose:at,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{borderRadius:3,p:2}},children:[(0,I.jsx)(C.A,{children:(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,I.jsx)(g.A,{variant:"h6",fontWeight:"bold",children:"R\xfat Ti\u1ec1n T\u1eeb Qu\u1ef9"}),(0,I.jsx)(y.A,{onClick:at,size:"small",children:(0,I.jsx)(h.A,{})})]})}),(0,I.jsxs)(w.A,{children:[X&&(0,I.jsxs)(x.A,{sx:{mb:2},children:[(0,I.jsxs)(g.A,{variant:"subtitle1",fontWeight:"medium",gutterBottom:!0,children:["Qu\u1ef9: ",X.name]}),(0,I.jsxs)(g.A,{variant:"body2",color:"text.secondary",children:["Hi\u1ec7n t\u1ea1i: ",it(X.current_amount||0)]}),(0,I.jsxs)(g.A,{variant:"body2",color:"text.secondary",children:["M\u1ee5c ti\xeau: ",it(X.target_amount||0)]}),(0,I.jsxs)(g.A,{variant:"body2",color:"text.secondary",children:["S\u1ed1 d\u01b0 v\xed: ",it(q)]})]}),(0,I.jsx)(_.A,{label:"S\u1ed1 ti\u1ec1n r\xfat (VND)",type:"number",value:G,onChange:t=>M(t.target.value),fullWidth:!0,autoFocus:!0,helperText:"Nh\u1eadp s\u1ed1 ti\u1ec1n b\u1ea1n mu\u1ed1n r\xfat t\u1eeb qu\u1ef9",InputProps:{inputProps:{min:1,max:null===X||void 0===X?void 0:X.current_amount}},variant:"outlined"})]}),(0,I.jsxs)(S.A,{sx:{px:3,py:2},children:[(0,I.jsx)(j.A,{variant:"outlined",onClick:at,sx:{borderRadius:2,px:3},children:"H\u1ee7y"}),(0,I.jsx)(j.A,{variant:"contained",onClick:async()=>{if(!X)return et("Kh\xf4ng c\xf3 qu\u1ef9 \u0111\u01b0\u1ee3c ch\u1ecdn","error"),void at();const t=Number(G);if(isNaN(t)||t<=0)et("S\u1ed1 ti\u1ec1n kh\xf4ng h\u1ee3p l\u1ec7","error");else if(t>X.current_amount)et("S\u1ed1 ti\u1ec1n r\xfat v\u01b0\u1ee3t qu\xe1 s\u1ed1 d\u01b0 qu\u1ef9","error");else try{Y(!0);const e=await R.A.patch("/api/savings/".concat(X._id,"/withdraw"),{amount:t});void 0!==e.data.newBalance&&Q(e.data.newBalance),u((t=>t.map((t=>t._id===X._id?e.data.saving:t)))),at(),et("R\xfat ".concat(it(t)," t\u1eeb qu\u1ef9 th\xe0nh c\xf4ng"),"success")}catch(r){var e,n,a;console.error("\u274c L\u1ed7i r\xfat ti\u1ec1n:",r);const t=404===(null===(e=r.response)||void 0===e?void 0:e.status)?"Qu\u1ef9 ti\u1ebft ki\u1ec7m kh\xf4ng t\u1ed3n t\u1ea1i":400===(null===(n=r.response)||void 0===n?void 0:n.status)?r.response.data.message||"D\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7":500===(null===(a=r.response)||void 0===a?void 0:a.status)?"L\u1ed7i server: Vui l\xf2ng ki\u1ec3m tra c\u1ea5u h\xecnh ho\u1eb7c li\xean h\u1ec7 h\u1ed7 tr\u1ee3.":"Kh\xf4ng th\u1ec3 r\xfat ti\u1ec1n t\u1eeb qu\u1ef9. Vui l\xf2ng th\u1eed l\u1ea1i.";et(t,"error")}finally{Y(!1)}},sx:{borderRadius:2,px:3},children:"X\xe1c Nh\u1eadn"})]})]}),(0,I.jsxs)(k.A,{open:"deleteConfirm"===K&&!!X,onClose:at,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{borderRadius:3,p:2}},children:[(0,I.jsx)(C.A,{children:(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,I.jsx)(g.A,{variant:"h6",fontWeight:"bold",children:"X\xe1c Nh\u1eadn X\xf3a Qu\u1ef9"}),(0,I.jsx)(y.A,{onClick:at,size:"small",children:(0,I.jsx)(h.A,{})})]})}),(0,I.jsx)(w.A,{children:X&&(0,I.jsxs)(g.A,{variant:"body1",children:['B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a qu\u1ef9 "',(0,I.jsx)("strong",{children:X.name}),'" kh\xf4ng? S\u1ed1 ti\u1ec1n hi\u1ec7n t\u1ea1i (',(0,I.jsx)("strong",{children:it(X.current_amount)}),") s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n v\xe0o s\u1ed1 d\u01b0 v\xed c\u1ee7a b\u1ea1n."]})}),(0,I.jsxs)(S.A,{sx:{px:3,py:2},children:[(0,I.jsx)(j.A,{variant:"outlined",onClick:at,sx:{borderRadius:2,px:3},children:"H\u1ee7y"}),(0,I.jsx)(j.A,{variant:"contained",color:"error",onClick:async()=>{if(X)try{Y(!0);const t=await R.A.delete("/api/savings/".concat(X._id),{data:{returnToBalance:!0}});void 0!==t.data.newBalance?Q(t.data.newBalance):await tt(),u((t=>t.filter((t=>t._id!==X._id)))),at(),et("X\xf3a qu\u1ef9 ti\u1ebft ki\u1ec7m th\xe0nh c\xf4ng. ".concat(it(X.current_amount)," \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam v\xe0o s\u1ed1 d\u01b0."),"success")}catch(n){var t,e;console.error("\u274c L\u1ed7i x\xf3a qu\u1ef9:",n),et((null===(t=n.response)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message)||"L\u1ed7i x\xf3a qu\u1ef9","error")}finally{Y(!1)}},sx:{borderRadius:2,px:3},children:"X\xf3a"})]})]}),(0,I.jsx)(W.A,{open:U.open,autoHideDuration:5e3,onClose:()=>$((0,a.A)((0,a.A)({},U),{},{open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,I.jsx)(P,{onClose:()=>$((0,a.A)((0,a.A)({},U),{},{open:!1})),severity:U.severity,sx:{width:"100%"},children:U.message})})]})}}}]);
//# sourceMappingURL=5526.c8dcc95c.chunk.js.map