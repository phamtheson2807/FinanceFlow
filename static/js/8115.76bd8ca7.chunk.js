"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[8115],{48115:(n,t,i)=>{i.r(t),i.d(t,{default:()=>f});var e=i(89379),a=i(96446),o=i(85865),s=i(81637),r=i(14194),c=i(35721),l=i(30681),h=i(48734),d=i(55487),g=i(65043),p=i(84033),x=i(70579);const f=()=>{const[n,t]=(0,g.useState)([]),[i,f]=(0,g.useState)(!0),[m,y]=(0,g.useState)(null);return(0,g.useEffect)((()=>{(async()=>{try{const n=localStorage.getItem("token");if(console.log("Token \u0111ang s\u1eed d\u1ee5ng:",n),!n)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");const i=(await p.A.get("/api/notifications")).data.map((n=>(0,e.A)((0,e.A)({},n),{},{isRead:n.isRead||!1})));t(i)}catch(m){var n,i;console.error("L\u1ed7i t\u1ea3i th\xf4ng b\xe1o:",m),y((null===(n=m.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch th\xf4ng b\xe1o.")}finally{f(!1)}})()}),[]),(0,x.jsxs)(a.A,{sx:{p:{xs:2,sm:3,md:4},bgcolor:"#f0f4f8",minHeight:"calc(100vh - 64px)"},children:[(0,x.jsx)(d.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,type:"spring",stiffness:200,damping:20},children:(0,x.jsx)(o.A,{variant:"h4",gutterBottom:!0,sx:{fontFamily:"Poppins, sans-serif",fontWeight:"bold",color:"#1E3A8A",textShadow:"0 2px 5px rgba(0,0,0,0.1)"},children:"Th\xf4ng b\xe1o"})}),i?(0,x.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,x.jsx)(s.A,{sx:{color:"#1E3A8A"}})}):m?(0,x.jsx)(r.A,{severity:"error",sx:{mb:2},children:m}):(0,x.jsx)(c.A,{children:n.length>0?n.map(((i,a)=>(0,x.jsx)(d.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a,duration:.5},children:(0,x.jsx)(l.Ay,{sx:{bgcolor:"white",mb:1,borderRadius:2,boxShadow:"0 2px 5px rgba(0,0,0,0.1)","&:hover":{bgcolor:"rgba(0,0,0,0.03)"}},onClick:()=>(async i=>{try{if(!localStorage.getItem("token"))throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");await p.A.put("/api/notifications/".concat(i,"/mark-read"),{}),t(n.map((n=>n._id===i?(0,e.A)((0,e.A)({},n),{},{isRead:!0}):n)))}catch(m){var a,o;console.error("L\u1ed7i \u0111\xe1nh d\u1ea5u \u0111\xe3 \u0111\u1ecdc:",m),y((null===(a=m.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"Kh\xf4ng th\u1ec3 \u0111\xe1nh d\u1ea5u th\xf4ng b\xe1o l\xe0 \u0111\xe3 \u0111\u1ecdc.")}})(i._id),children:(0,x.jsx)(h.A,{primary:(0,x.jsx)(o.A,{variant:"h6",sx:{fontFamily:"Poppins, sans-serif",color:"#1E3A8A",fontWeight:"bold"},children:i.title}),secondary:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.A,{sx:{fontFamily:"Poppins, sans-serif",color:"#555",mt:.5},children:i.content}),(0,x.jsxs)(o.A,{variant:"caption",sx:{fontFamily:"Poppins, sans-serif",color:"#777",mt:.5},children:["\u0110\u01b0\u1ee3c t\u1ea1o b\u1edfi:"," ",i.createdBy?"".concat(i.createdBy.name," (").concat(i.createdBy.email,")"):"Kh\xf4ng x\xe1c \u0111\u1ecbnh"," ","- ",new Date(i.createdAt).toLocaleString("vi-VN")]}),(0,x.jsxs)(o.A,{variant:"caption",sx:{fontFamily:"Poppins, sans-serif",color:i.isActive?"#2e7d32":"#d32f2f",mt:.5},children:["Tr\u1ea1ng th\xe1i: ",i.isActive?"\u0110ang hi\u1ec3n th\u1ecb":"\u1ea8n"]})]})})})},i._id))):(0,x.jsx)(o.A,{sx:{fontFamily:"Poppins, sans-serif",color:"#666",textAlign:"center"},children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o n\xe0o."})})]})}}}]);
//# sourceMappingURL=8115.76bd8ca7.chunk.js.map