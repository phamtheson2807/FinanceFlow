"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[3730],{22505:(e,o,t)=>{var n=t(24994);o.A=void 0;var i=n(t(40039)),a=t(70579);o.A=(0,i.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},43730:(e,o,t)=>{t.r(o),t.d(o,{default:()=>D});var n=t(89379),i=t(22505),a=t(26240),r=t(96446),s=t(85865),l=t(11906),c=t(81637),d=t(67784),p=t(90035),h=t(26600),u=t(35316),x=t(69285),m=t(32143),f=t(29347),g=t(86328),y=t(79722),A=t(55487),b=t(65043),v=t(63471),j=t(95540),w=t(28076),S=t(79650),k=t(63336),C=t(71806),M=t(84882),L=t(10039),I=t(58093),P=t(73460),T=t(43845),F=t(17392),E=t(70579);const z=(0,A.P)(w.A),R=e=>{let{categories:o,onDelete:t,onEdit:i}=e;const l=(0,a.A)(),[c,d]=(0,b.useState)("name"),[p,h]=(0,b.useState)("asc"),u=[...o].sort(((e,o)=>{const t=e[c],n=o[c];return"asc"===p?t.localeCompare(n):n.localeCompare(t)})),x={color:"#ffffff",fontWeight:600,fontSize:"1rem",fontFamily:"Poppins, sans-serif",padding:"16px",backgroundColor:l.palette.primary.main,borderBottom:"2px solid ".concat(l.palette.primary.dark)},m={fontFamily:"Poppins, sans-serif",fontSize:"0.95rem",padding:"14px 16px",color:l.palette.text.primary};return(0,E.jsx)(A.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:(0,E.jsx)(S.A,{component:k.A,sx:{bgcolor:"#ffffff",borderRadius:"12px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.08)",maxHeight:{xs:"400px",sm:"600px"},overflow:"auto",border:"1px solid rgba(0, 0, 0, 0.05)"},children:(0,E.jsxs)(C.A,{stickyHeader:!0,"aria-label":"B\u1ea3ng danh m\u1ee5c",children:[(0,E.jsx)(M.A,{children:(0,E.jsx)(w.A,{children:["T\xean","Lo\u1ea1i","M\xf4 t\u1ea3","H\xe0nh \u0111\u1ed9ng"].map(((e,o)=>(0,E.jsx)(L.A,{sx:x,children:(0,E.jsx)(I.A,{active:c===["name","type","description",""][o],direction:c===["name","type","description",""][o]?p:"asc",onClick:o<3?()=>{return h(c===(e=["name","type","description"][o])&&"asc"===p?"desc":"asc"),void d(e);var e}:void 0,sx:{color:"#ffffff !important","&:hover":{color:"#e0e0e0 !important"},"&.Mui-active":{color:"#ffffff !important"},"& .MuiTableSortLabel-icon":{color:"#ffffff !important"}},children:e})},o)))})}),(0,E.jsx)(P.A,{children:u.length>0?u.map(((e,o)=>(0,E.jsxs)(z,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05*o},sx:{"&:hover":{bgcolor:l.palette.grey[100],transition:"background-color 0.3s ease"},borderBottom:"1px solid ".concat(l.palette.divider)},children:[(0,E.jsx)(L.A,{sx:m,children:e.name}),(0,E.jsx)(L.A,{sx:m,children:(0,E.jsx)(T.A,{label:"income"===e.type?"Thu":"Chi",color:"income"===e.type?"success":"error",size:"small",sx:{fontFamily:"Poppins, sans-serif",fontWeight:500,bgcolor:"income"===e.type?"#e8f5e9":"#ffebee",color:"income"===e.type?"#2e7d32":"#c62828",borderRadius:"8px",px:1}})}),(0,E.jsx)(L.A,{sx:(0,n.A)((0,n.A)({},m),{},{color:l.palette.text.secondary}),children:e.description||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3"}),(0,E.jsx)(L.A,{align:"center",sx:m,children:(0,E.jsxs)(r.A,{sx:{display:"flex",justifyContent:"center",gap:1.5},children:[(0,E.jsx)(A.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,E.jsx)(F.A,{color:"primary",onClick:()=>i(e),sx:{p:.5,"&:hover":{bgcolor:l.palette.primary.light,color:"#fff"}},children:(0,E.jsx)(j.A,{fontSize:"small"})})}),(0,E.jsx)(A.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,E.jsx)(F.A,{color:"error",onClick:()=>t(e._id),sx:{p:.5,"&:hover":{bgcolor:l.palette.error.light,color:"#fff"}},children:(0,E.jsx)(v.A,{fontSize:"small"})})})]})})]},e._id))):(0,E.jsx)(w.A,{children:(0,E.jsx)(L.A,{colSpan:4,align:"center",children:(0,E.jsx)(A.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,E.jsx)(s.A,{variant:"body1",color:"text.secondary",sx:{fontFamily:"Poppins, sans-serif",py:4,fontSize:"1rem",fontWeight:500},children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u danh m\u1ee5c"})})})})})]})})})},D=()=>{const e=(0,a.A)(),[o,t]=(0,b.useState)([]),[v,j]=(0,b.useState)(""),[w,S]=(0,b.useState)(!0),[k,C]=(0,b.useState)(null),[M,L]=(0,b.useState)(null),[I,P]=(0,b.useState)({name:"",type:"income",description:""}),[T,F]=(0,b.useState)(null),[z,D]=(0,b.useState)(!1);(0,b.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");const o=await y.A.get("http://localhost:5000/api/admin/categories",{headers:{Authorization:"Bearer ".concat(e)}});t(o.data)}catch(k){console.error("L\u1ed7i khi t\u1ea3i danh m\u1ee5c:",k),C("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch danh m\u1ee5c. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{S(!1)}})()}),[]);const B=o.filter((e=>e.name.toLowerCase().includes(v.toLowerCase())));return(0,E.jsxs)(r.A,{sx:{p:{xs:2,sm:3,md:4},bgcolor:"#f0f4f8",minHeight:"calc(100vh - 64px)"},children:[k&&(0,E.jsx)(s.A,{sx:{color:"error.main",mb:2,textAlign:"center"},children:k}),(0,E.jsx)(A.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,type:"spring",stiffness:200,damping:20},children:(0,E.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,E.jsx)(s.A,{variant:"h3",sx:{fontFamily:"Poppins, sans-serif",fontWeight:"bold",color:"#1E3A8A",textShadow:"0 2px 5px rgba(0,0,0,0.1)"},children:"Qu\u1ea3n L\xfd Danh M\u1ee5c"}),(0,E.jsx)(A.P.div,{whileHover:{scale:1.05},transition:{duration:.3},children:(0,E.jsx)(l.A,{variant:"contained",startIcon:(0,E.jsx)(i.A,{}),onClick:()=>D(!0),sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #4CAF50, #2E7D32)",borderRadius:2,px:3,py:1,boxShadow:"0 5px 15px rgba(0,0,0,0.2)","&:hover":{background:"linear-gradient(45deg, #66BB6A, #1B5E20)"}},children:"Th\xeam danh m\u1ee5c"})})]})}),w?(0,E.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,E.jsx)(A.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,E.jsx)(c.A,{size:60,sx:{color:e.palette.primary.main}})})}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(A.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,E.jsx)(d.A,{label:"T\xecm ki\u1ebfm danh m\u1ee5c",variant:"outlined",value:v,onChange:e=>j(e.target.value),sx:{width:{xs:"100%",sm:"50%"},mb:3,"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)","&:hover fieldset":{borderColor:e.palette.primary.main},"&.Mui-focused fieldset":{borderColor:e.palette.primary.main,boxShadow:"0 0 5px ".concat(e.palette.primary.main,"50")}},"& .MuiInputLabel-root":{fontFamily:"Poppins, sans-serif",color:e.palette.text.secondary},"& .MuiInputLabel-root.Mui-focused":{color:e.palette.primary.main}}})}),(0,E.jsxs)(p.A,{open:z||!!T,onClose:()=>{P({name:"",type:"income",description:""}),D(!1),F(null)},TransitionComponent:g.A,transitionDuration:400,children:[(0,E.jsx)(h.A,{sx:{fontFamily:"Poppins, sans-serif",fontWeight:"bold",bgcolor:"rgba(245, 245, 245, 0.95)",color:"#1E3A8A",py:2,boxShadow:"0 2px 10px rgba(0,0,0,0.05)"},children:z?"Th\xeam danh m\u1ee5c":"S\u1eeda danh m\u1ee5c"}),(0,E.jsxs)(u.A,{sx:{bgcolor:"rgba(245, 245, 245, 0.95)",py:3,px:4},children:[(0,E.jsx)(d.A,{autoFocus:!0,margin:"dense",label:"T\xean danh m\u1ee5c",type:"text",fullWidth:!0,value:z?I.name:(null===T||void 0===T?void 0:T.name)||"",onChange:e=>{z?P((0,n.A)((0,n.A)({},I),{},{name:e.target.value})):T&&F((0,n.A)((0,n.A)({},T),{},{name:e.target.value}))},variant:"outlined",sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)"},"& .MuiInputLabel-root":{fontFamily:"Poppins, sans-serif",color:"#555"},"& .MuiInputLabel-root.Mui-focused":{color:e.palette.primary.main}}}),(0,E.jsxs)(x.A,{margin:"dense",label:"Lo\u1ea1i",fullWidth:!0,value:(z?I.type:null===T||void 0===T?void 0:T.type)||"income",onChange:e=>{const o=e.target.value;z?P((0,n.A)((0,n.A)({},I),{},{type:o})):T&&F((0,n.A)((0,n.A)({},T),{},{type:o}))},variant:"outlined",sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)"},"& .MuiInputLabel-root":{fontFamily:"Poppins, sans-serif",color:"#555"},"& .MuiInputLabel-root.Mui-focused":{color:e.palette.primary.main}},children:[(0,E.jsx)(m.A,{value:"income",children:"Thu"}),(0,E.jsx)(m.A,{value:"expense",children:"Chi"})]}),(0,E.jsx)(d.A,{margin:"dense",label:"M\xf4 t\u1ea3",type:"text",fullWidth:!0,value:z?I.description:(null===T||void 0===T?void 0:T.description)||"",onChange:e=>{z?P((0,n.A)((0,n.A)({},I),{},{description:e.target.value})):T&&F((0,n.A)((0,n.A)({},T),{},{description:e.target.value}))},variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)"},"& .MuiInputLabel-root":{fontFamily:"Poppins, sans-serif",color:"#555"},"& .MuiInputLabel-root.Mui-focused":{color:e.palette.primary.main}}})]}),(0,E.jsxs)(f.A,{sx:{bgcolor:"rgba(245, 245, 245, 0.95)",px:4,py:2},children:[(0,E.jsx)(l.A,{onClick:()=>{P({name:"",type:"income",description:""}),D(!1),F(null)},sx:{fontFamily:"Poppins, sans-serif",color:"#777","&:hover":{color:"#1E3A8A"}},children:"H\u1ee7y"}),(0,E.jsx)(l.A,{onClick:()=>{z?(async()=>{try{const e=localStorage.getItem("token");if(!e)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");const n=await y.A.post("http://localhost:5000/api/admin/categories",I,{headers:{Authorization:"Bearer ".concat(e)}});t([...o,n.data]),P({name:"",type:"income",description:""}),D(!1),C(null)}catch(k){var e,n,i;y.A.isAxiosError(k)?(console.error("L\u1ed7i khi th\xeam danh m\u1ee5c:",null===(e=k.response)||void 0===e?void 0:e.data),C((null===(n=k.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Kh\xf4ng th\u1ec3 th\xeam danh m\u1ee5c. Vui l\xf2ng th\u1eed l\u1ea1i.")):(console.error("L\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh:",k),C("Kh\xf4ng th\u1ec3 th\xeam danh m\u1ee5c. Vui l\xf2ng th\u1eed l\u1ea1i."))}})():T&&(async e=>{try{const n=localStorage.getItem("token");if(!n)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");const i=await y.A.put("http://localhost:5000/api/admin/categories/".concat(e._id),e,{headers:{Authorization:"Bearer ".concat(n)}});t(o.map((o=>o._id===e._id?i.data:o))),F(null),C(null)}catch(k){console.error("L\u1ed7i khi s\u1eeda danh m\u1ee5c:",k),C("Kh\xf4ng th\u1ec3 s\u1eeda danh m\u1ee5c. Vui l\xf2ng th\u1eed l\u1ea1i.")}})(T)},variant:"contained",color:"primary",sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #3B82F6, #1E3A8A)",borderRadius:3,px:4,py:1,boxShadow:"0 5px 15px rgba(0,0,0,0.1)","&:hover":{background:"linear-gradient(45deg, #4B9EFF, #2A4D9E)"}},children:z?"Th\xeam":"L\u01b0u"})]})]}),(0,E.jsx)(A.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.4,type:"spring",stiffness:200,damping:20},children:(0,E.jsx)(R,{categories:B,onDelete:e=>L(e),onEdit:e=>F(e)})}),(0,E.jsxs)(p.A,{open:!!M,onClose:()=>L(null),TransitionComponent:g.A,transitionDuration:400,children:[(0,E.jsx)(h.A,{sx:{fontFamily:"Poppins, sans-serif",fontWeight:"bold",bgcolor:"rgba(245, 245, 245, 0.95)",color:"#1E3A8A",py:2,boxShadow:"0 2px 10px rgba(0,0,0,0.05)"},children:"X\xe1c nh\u1eadn x\xf3a"}),(0,E.jsx)(u.A,{sx:{bgcolor:"rgba(245, 245, 245, 0.95)",py:3,px:4},children:(0,E.jsx)(s.A,{sx:{fontFamily:"Poppins, sans-serif",color:"#555"},children:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a danh m\u1ee5c n\xe0y? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c."})}),(0,E.jsxs)(f.A,{sx:{bgcolor:"rgba(245, 245, 245, 0.95)",px:4,py:2},children:[(0,E.jsx)(l.A,{onClick:()=>L(null),sx:{fontFamily:"Poppins, sans-serif",color:"#777","&:hover":{color:"#1E3A8A"}},children:"H\u1ee7y"}),(0,E.jsx)(l.A,{onClick:()=>M&&(async e=>{try{const n=localStorage.getItem("token");if(!n)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");await y.A.delete("http://localhost:5000/api/admin/categories/".concat(e),{headers:{Authorization:"Bearer ".concat(n)}}),t(o.filter((o=>o._id!==e))),L(null),C(null)}catch(k){console.error("L\u1ed7i khi x\xf3a danh m\u1ee5c:",k),C("Kh\xf4ng th\u1ec3 x\xf3a danh m\u1ee5c. Vui l\xf2ng th\u1eed l\u1ea1i.")}})(M),variant:"contained",color:"error",sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #f44336, #d32f2f)",borderRadius:3,px:4,py:1,boxShadow:"0 5px 15px rgba(0,0,0,0.1)","&:hover":{background:"linear-gradient(45deg, #ff5f52, #e64a19)"}},children:"X\xf3a"})]})]})]})]})}},58093:(e,o,t)=>{t.d(o,{A:()=>j});var n=t(98587),i=t(58168),a=t(98610),r=t(58387),s=t(65043),l=t(66236),c=t(59662),d=t(70579);const p=(0,c.A)((0,d.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");var h=t(34535),u=t(98206),x=t(6803),m=t(92532),f=t(72372);function g(e){return(0,f.Ay)("MuiTableSortLabel",e)}const y=(0,m.A)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),A=["active","children","className","direction","hideSortIcon","IconComponent"],b=(0,h.Ay)(l.A,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.active&&o.active]}})((e=>{let{theme:o}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(o.vars||o).palette.text.secondary},"&:hover":{color:(o.vars||o).palette.text.secondary,["& .".concat(y.icon)]:{opacity:.5}},["&.".concat(y.active)]:{color:(o.vars||o).palette.text.primary,["& .".concat(y.icon)]:{opacity:1,color:(o.vars||o).palette.text.secondary}}}})),v=(0,h.Ay)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.icon,o["iconDirection".concat((0,x.A)(t.direction))]]}})((e=>{let{theme:o,ownerState:t}=e;return(0,i.A)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:o.transitions.create(["opacity","transform"],{duration:o.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})})),j=s.forwardRef((function(e,o){const t=(0,u.b)({props:e,name:"MuiTableSortLabel"}),{active:s=!1,children:l,className:c,direction:h="asc",hideSortIcon:m=!1,IconComponent:f=p}=t,y=(0,n.A)(t,A),j=(0,i.A)({},t,{active:s,direction:h,hideSortIcon:m,IconComponent:f}),w=(e=>{const{classes:o,direction:t,active:n}=e,i={root:["root",n&&"active"],icon:["icon","iconDirection".concat((0,x.A)(t))]};return(0,a.A)(i,g,o)})(j);return(0,d.jsxs)(b,(0,i.A)({className:(0,r.A)(w.root,c),component:"span",disableRipple:!0,ownerState:j,ref:o},y,{children:[l,m&&!s?null:(0,d.jsx)(v,{as:f,className:(0,r.A)(w.icon),ownerState:j})]}))}))},63471:(e,o,t)=>{var n=t(24994);o.A=void 0;var i=n(t(40039)),a=t(70579);o.A=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},79650:(e,o,t)=>{t.d(o,{A:()=>f});var n=t(58168),i=t(98587),a=t(65043),r=t(58387),s=t(98610),l=t(98206),c=t(34535),d=t(92532),p=t(72372);function h(e){return(0,p.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var u=t(70579);const x=["className","component"],m=(0,c.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,o)=>o.root})({width:"100%",overflowX:"auto"}),f=a.forwardRef((function(e,o){const t=(0,l.b)({props:e,name:"MuiTableContainer"}),{className:a,component:c="div"}=t,d=(0,i.A)(t,x),p=(0,n.A)({},t,{component:c}),f=(e=>{const{classes:o}=e;return(0,s.A)({root:["root"]},h,o)})(p);return(0,u.jsx)(m,(0,n.A)({ref:o,as:c,className:(0,r.A)(f.root,a),ownerState:p},d))}))},95540:(e,o,t)=>{var n=t(24994);o.A=void 0;var i=n(t(40039)),a=t(70579);o.A=(0,i.default)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=3730.9cde5a44.chunk.js.map