"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[5786],{6058:(e,t,n)=>{n.d(t,{Fq:()=>b,yP:()=>m});var o=n(80045),a=n(89379),r=n(65043),i=n(17304);const s=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],l="label";function c(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function h(e,t){e.labels=t}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;const o=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!o.includes(r)?(o.push(r),Object.assign(r,t),r):(0,a.A)({},t)}))}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;const n={labels:[],datasets:[]};return h(n,e.labels),d(n,e.datasets,t),n}function u(e,t){const{height:n=150,width:l=300,redraw:u=!1,datasetIdKey:p,type:x,data:m,options:b,plugins:f=[],fallbackContent:y,updateMode:A}=e,v=(0,o.A)(e,s),C=(0,r.useRef)(null),D=(0,r.useRef)(null),S=()=>{C.current&&(D.current=new i.t1(C.current,{type:x,data:g(m,p),options:b&&(0,a.A)({},b),plugins:f}),c(t,D.current))},k=()=>{c(t,null),D.current&&(D.current.destroy(),D.current=null)};return(0,r.useEffect)((()=>{!u&&D.current&&b&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(D.current,b)}),[u,b]),(0,r.useEffect)((()=>{!u&&D.current&&h(D.current.config.data,m.labels)}),[u,m.labels]),(0,r.useEffect)((()=>{!u&&D.current&&m.datasets&&d(D.current.config.data,m.datasets,p)}),[u,m.datasets]),(0,r.useEffect)((()=>{D.current&&(u?(k(),setTimeout(S)):D.current.update(A))}),[u,b,m.labels,m.datasets,A]),(0,r.useEffect)((()=>{D.current&&(k(),setTimeout(S))}),[x]),(0,r.useEffect)((()=>(S(),()=>k())),[]),r.createElement("canvas",(0,a.A)({ref:C,role:"img",height:n,width:l},v),y)}const p=(0,r.forwardRef)(u);function x(e,t){return i.t1.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(p,(0,a.A)((0,a.A)({},t),{},{ref:n,type:e}))))}const m=x("bar",i.A6),b=x("pie",i.P$)},75786:(e,t,n)=>{n.r(t),n.d(t,{default:()=>X});var o=n(89379),a=n(59662),r=n(70579);const i=(0,a.A)((0,r.jsx)("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"}),"InsertDriveFile"),s=(0,a.A)((0,r.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M17 13l-5 5-5-5h3V9h4v4z"}),"CloudDownload");var l=n(34535),c=n(63336),h=n(11906),d=n(90035),g=n(69285),u=n(79190),p=n(85865),x=n(96446),m=n(68903),b=n(39336),f=n(53193),y=n(32143),A=n(26600),v=n(35316),C=n(67784),D=n(29347),S=n(26240),k=n(79722),j=n(17304),F=n(65043),w=n(6058),z=n(83003),T=n(73216),B=n(11238);j.t1.register(j.Bs,j.m_,j.s$,j.E8,j.PP,j.kc);const N=(0,l.Ay)(c.A)((e=>{let{theme:t}=e;return{padding:t.spacing(3),borderRadius:"16px",background:"dark"===t.palette.mode?"linear-gradient(135deg, #1e2a38 0%, #2d3748 100%)":"linear-gradient(135deg, #fff 0%, #f7fafc 100%)",boxShadow:"dark"===t.palette.mode?"0 8px 16px rgba(0,0,0,0.2)":"0 4px 20px rgba(0,0,0,0.05)",border:"1px solid ".concat("dark"===t.palette.mode?"rgba(255,255,255,0.1)":"rgba(226, 232, 240, 0.8)"),transition:"all 0.2s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"dark"===t.palette.mode?"0 12px 24px rgba(0,0,0,0.3)":"0 12px 24px rgba(0,0,0,0.1)"}}})),V=(0,l.Ay)(h.A)((e=>{let{theme:t}=e;return{borderRadius:"12px",padding:t.spacing(1.5,3),fontSize:"0.95rem",fontWeight:600,textTransform:"none",transition:"all 0.2s ease",border:"1px solid rgba(37, 99, 235, 0.1)",boxShadow:"0 4px 10px rgba(37, 99, 235, 0.15)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 14px rgba(37, 99, 235, 0.2)"}}})),E=(0,l.Ay)(d.A)((e=>{let{theme:t}=e;return{"& .MuiDialog-paper":{borderRadius:"16px",background:"dark"===t.palette.mode?"linear-gradient(135deg, #1e2a38 0%, #2d3748 100%)":"linear-gradient(135deg, #fff 0%, #f7fafc 100%)",border:"1px solid ".concat("dark"===t.palette.mode?"rgba(255,255,255,0.1)":"rgba(226, 232, 240, 0.8)"),boxShadow:"0 10px 30px rgba(0, 0, 0, 0.15)",padding:t.spacing(2)}}})),L=(0,l.Ay)(g.A)((e=>{let{theme:t}=e;return{borderRadius:"12px",backgroundColor:"dark"===t.palette.mode?"rgba(255,255,255,0.05)":"rgba(241, 245, 249, 0.8)",border:"1px solid ".concat("dark"===t.palette.mode?"rgba(255,255,255,0.1)":"rgba(226, 232, 240, 0.8)"),"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(255,255,255,0.08)":"rgba(226, 232, 240, 0.8)"}}})),I=(0,l.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"0.95rem",color:"dark"===t.palette.mode?"#94a3b8":"#64748b"}})),W=(0,l.Ay)(p.A)((e=>{let{theme:t}=e;return{color:"dark"===t.palette.mode?"#e2e8f0":"#1e293b"}})),O=(0,l.Ay)(x.A)((e=>{let{theme:t}=e;return{padding:t.spacing(3),textAlign:"center"}})),P=(0,l.Ay)(x.A)((e=>{let{theme:t}=e;return{minHeight:"100vh",background:"dark"===t.palette.mode?"#121212":"#f8fafc",padding:t.spacing(2),width:"100%",display:"flex",flexDirection:"column",gap:t.spacing(3),[t.breakpoints.up("md")]:{padding:t.spacing(2)}}})),_=(0,l.Ay)(W)((e=>{let{theme:t}=e;return{fontSize:"1.5rem",fontWeight:600,background:"linear-gradient(45deg, #2563eb, #3b82f6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:"-0.02em",[t.breakpoints.up("sm")]:{fontSize:"1.8rem"},[t.breakpoints.up("md")]:{fontSize:"2rem"}}})),R=(0,l.Ay)(x.A)((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.spacing(1.5)}})),M={"\u0102n u\u1ed1ng":"#FF6B6B","Di chuy\u1ec3n":"#4ECDC4","Mua s\u1eafm":"#45B7D1","Gi\u1ea3i tr\xed":"#96CEB4","H\xf3a \u0111\u01a1n & Ti\u1ec7n \xedch":"#FFEEAD","X\u0103ng xe":"#FFD93D","Ti\u1ebft ki\u1ec7m":"#6C5CE7","L\u01b0\u01a1ng":"#A8E6CF","Th\u01b0\u1edfng":"#DCEDC1","\u0110\u1ea7u t\u01b0":"#FFB6B9","Kh\xe1c":"#957DAD"},K=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD","#FFD93D","#6C5CE7","#A8E6CF","#DCEDC1","#FFB6B9","#957DAD","#D4A5A5","#89C4F4","#F5B7B1","#82E0AA"],X=()=>{const e=(0,T.Zp)(),t=(0,S.A)(),{plan:a}=(0,z.d4)((e=>e.subscription)),[l,c]=(0,F.useState)({income:0,expenses:0,balance:0}),[h,d]=(0,F.useState)({labels:[],income:[],expenses:[]}),[u,j]=(0,F.useState)({labels:[],expenses:[],colors:[]}),[X,Y]=(0,F.useState)("month"),[H,q]=(0,F.useState)(""),[G,U]=(0,F.useState)([]),[$,Z]=(0,F.useState)(!0),[J,Q]=(0,F.useState)(null),[ee,te]=(0,F.useState)(!1),[ne,oe]=(0,F.useState)(!1),[ae,re]=(0,F.useState)({type:"expense",amount:0,category:"\u0102n u\u1ed1ng",date:(new Date).toISOString().split("T")[0]}),ie=async()=>{try{Z(!0),Q(null);const e=localStorage.getItem("token");if(!e)throw new Error("Kh\xf4ng t\xecm th\u1ea5y token. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.");const t=await k.A.get("http://localhost:5000/api/categories",{headers:{Authorization:"Bearer ".concat(e)}}),n=t.data.reduce(((e,t,n)=>{const o=t.name;return e[t._id]={name:o,color:M[o]||K[n%K.length],icon:t.icon||"\ud83d\udcca"},e}),{}),a=new Date;let r,i;switch(X){case"day":r=a.toISOString().split("T")[0],i=r;break;case"month":r=new Date(a.getFullYear(),a.getMonth(),1).toISOString().split("T")[0],i=new Date(a.getFullYear(),a.getMonth()+1,0).toISOString().split("T")[0];break;case"year":r="".concat(a.getFullYear(),"-01-01"),i="".concat(a.getFullYear(),"-12-31")}const s=new URLSearchParams({startDate:r,endDate:i,limit:"1000"}).toString(),l=(await k.A.get("http://localhost:5000/api/transactions?".concat(s),{headers:{Authorization:"Bearer ".concat(e)}})).data.transactions.map((e=>(0,o.A)((0,o.A)({},e),{},{categoryDetails:n[e.category]})));U(l);const h=l.filter((e=>"income"===e.type)).reduce(((e,t)=>e+("number"===typeof t.amount?t.amount:0)),0),g=l.filter((e=>"expense"===e.type)).reduce(((e,t)=>e+("number"===typeof t.amount?t.amount:0)),0);c({income:h,expenses:g,balance:h-g});const u={};l.forEach((e=>{const t=new Date(e.date),n="day"===X?t.toISOString().split("T")[0]:"month"===X?"".concat(t.getMonth()+1,"/").concat(t.getFullYear()):"".concat(t.getFullYear());u[n]||(u[n]={income:0,expense:0});const o="number"===typeof e.amount?e.amount:0;u[n]["income"===e.type?"income":"expense"]+=o}));const p=Object.keys(u).sort(),x=p.map((e=>u[e].income)),m=p.map((e=>u[e].expense));d({labels:p,income:x,expenses:m});const b={};l.filter((e=>"expense"===e.type)).forEach((e=>{const t=n[e.category]||{name:"Kh\xe1c",color:M["Kh\xe1c"]||K[K.length-1]},o=t.name;b[o]||(b[o]={amount:0,color:t.color,name:o}),b[o].amount+=e.amount}));const f=Object.values(b).sort(((e,t)=>t.amount-e.amount));j({labels:f.map((e=>e.name)),expenses:f.map((e=>e.amount)),colors:f.map((e=>e.color))})}catch(J){var t;console.error("L\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u:",J),J instanceof Error?Q(J.message||"\u0110\xe3 x\u1ea3y ra l\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u."):Q("\u0110\xe3 x\u1ea3y ra l\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh khi t\u1ea3i d\u1eef li\u1ec7u."),k.A.isAxiosError(J)&&401===(null===(t=J.response)||void 0===t?void 0:t.status)&&e("/login")}finally{Z(!1)}};(0,F.useEffect)((()=>{ie()}),[X]),(0,F.useEffect)((()=>{if(!G.length)return;const e={};G.filter((e=>{var t;return"expense"===e.type&&(!H||(null===(t=e.categoryDetails)||void 0===t?void 0:t.name)===H)})).forEach((t=>{const n=t.categoryDetails||{name:"Kh\xe1c",color:M["Kh\xe1c"]||K[K.length-1]},o=n.name;e[o]||(e[o]={amount:0,color:n.color,name:o}),e[o].amount+=t.amount}));const t=Object.values(e).sort(((e,t)=>t.amount-e.amount));j({labels:t.map((e=>e.name)),expenses:t.map((e=>e.amount)),colors:t.map((e=>e.color))})}),[H,G]);const se={labels:h.labels,datasets:[{label:"Thu nh\u1eadp",data:h.income,backgroundColor:"rgba(103, 230, 220, 0.7)",borderColor:"#67E6DC",borderWidth:1},{label:"Chi ti\xeau",data:h.expenses,backgroundColor:"rgba(255, 111, 105, 0.7)",borderColor:"#FF6F69",borderWidth:1}]},le={labels:u.labels,datasets:[{data:u.expenses,backgroundColor:u.colors,borderWidth:0}]};return $?(0,r.jsxs)(O,{children:[(0,r.jsx)(p.A,{variant:"h5",sx:{color:"#333",fontWeight:500},children:"B\xe1o c\xe1o T\xe0i ch\xednh"}),(0,r.jsx)(p.A,{sx:{mt:2,color:"#666"},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."})]}):J?(0,r.jsxs)(O,{children:[(0,r.jsx)(p.A,{variant:"h5",sx:{color:"#333",fontWeight:500},children:"B\xe1o c\xe1o T\xe0i ch\xednh"}),(0,r.jsx)(p.A,{sx:{mt:2,color:"#FF6F69"},children:J})]}):(0,r.jsxs)(P,{children:[(0,r.jsx)(_,{variant:"h4",children:"B\xe1o c\xe1o T\xe0i ch\xednh"}),(0,r.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,r.jsxs)(m.Ay,{item:!0,xs:12,md:4,children:[(0,r.jsxs)(N,{children:[(0,r.jsx)(W,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:600,mb:2},children:"T\u1ed5ng quan"}),(0,r.jsxs)(R,{children:[(0,r.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(W,{children:"Thu nh\u1eadp"}),(0,r.jsxs)(W,{sx:{fontWeight:600,color:"#4caf50"},children:[l.income.toLocaleString()," VND"]})]}),(0,r.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(W,{children:"Chi ti\xeau"}),(0,r.jsxs)(W,{sx:{fontWeight:600,color:"#f44336"},children:[l.expenses.toLocaleString()," VND"]})]}),(0,r.jsx)(b.A,{sx:{my:1}}),(0,r.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(W,{children:"S\u1ed1 d\u01b0"}),(0,r.jsxs)(W,{sx:{fontWeight:600},children:[l.balance.toLocaleString()," VND"]})]})]})]}),(0,r.jsx)(x.A,{sx:{mt:3},children:(0,r.jsxs)(f.A,{fullWidth:!0,children:[(0,r.jsx)(I,{children:"Kho\u1ea3ng th\u1eddi gian"}),(0,r.jsxs)(L,{value:X,onChange:e=>Y(e.target.value),children:[(0,r.jsx)(y.A,{value:"day",children:"Ng\xe0y"}),(0,r.jsx)(y.A,{value:"month",children:"Th\xe1ng"}),(0,r.jsx)(y.A,{value:"year",children:"N\u0103m"})]})]})}),(0,r.jsxs)(N,{sx:{mt:3},children:[(0,r.jsx)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:(0,r.jsx)(W,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:600},children:"Xu\u1ea5t B\xe1o c\xe1o"})}),(0,r.jsx)(x.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:"premium"===a||"pro"===a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{variant:"contained",onClick:async()=>{try{const e=localStorage.getItem("token");if(!(await k.A.post("http://localhost:5000/api/reports/export",{},{headers:{Authorization:"Bearer ".concat(e)}})).data.success)return void alert("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n xu\u1ea5t b\xe1o c\xe1o. Vui l\xf2ng n\xe2ng c\u1ea5p g\xf3i d\u1ecbch v\u1ee5.");const t=B.Wp.book_new(),n=[["","","B\xc1O C\xc1O T\xc0I CH\xcdNH"],["","","Xu\u1ea5t ng\xe0y: ".concat((new Date).toLocaleDateString("vi-VN"))],["","",""],["T\u1ed5ng thu nh\u1eadp","T\u1ed5ng chi ti\xeau","S\u1ed1 d\u01b0"],["".concat(l.income.toLocaleString("vi-VN")," VND"),"".concat(l.expenses.toLocaleString("vi-VN")," VND"),"".concat(l.balance.toLocaleString("vi-VN")," VND")]],a=B.Wp.aoa_to_sheet(n);a&&(a["!merges"]=[{s:{r:0,c:0},e:{r:0,c:2}},{s:{r:1,c:0},e:{r:1,c:2}}],a.A1={v:"B\xc1O C\xc1O T\xc0I CH\xcdNH",t:"s"},a.A1.s={font:{bold:!0,sz:16,color:{rgb:"FF6F69"}},alignment:{horizontal:"center",vertical:"center"}},a.A2={v:"Xu\u1ea5t ng\xe0y: ".concat((new Date).toLocaleDateString("vi-VN")),t:"s"},a.A2.s={font:{sz:12,color:{rgb:"6B728E"}},alignment:{horizontal:"center"}},a.A4={v:"T\u1ed5ng thu nh\u1eadp",t:"s"},a.B4={v:"T\u1ed5ng chi ti\xeau",t:"s"},a.C4={v:"S\u1ed1 d\u01b0",t:"s"},a.A4.s={font:{bold:!0,sz:12,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"2196F3"}},border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}}},alignment:{horizontal:"center"}},a.B4.s=(0,o.A)({},a.A4.s),a.C4.s=(0,o.A)({},a.A4.s),a.A5={v:"".concat(l.income.toLocaleString("vi-VN")," VND"),t:"s"},a.B5={v:"".concat(l.expenses.toLocaleString("vi-VN")," VND"),t:"s"},a.C5={v:"".concat(l.balance.toLocaleString("vi-VN")," VND"),t:"s"},a.A5.s={font:{sz:12,color:{rgb:"67E6DC"}},alignment:{horizontal:"right"},border:{bottom:{style:"thin",color:{rgb:"000000"}}}},a.B5.s={font:{sz:12,color:{rgb:"FF6F69"}},alignment:{horizontal:"right"},border:{bottom:{style:"thin",color:{rgb:"000000"}}}},a.C5.s={font:{sz:12,color:{rgb:"6B728E"}},alignment:{horizontal:"right"},border:{bottom:{style:"thin",color:{rgb:"000000"}}}},a["!cols"]=[{wch:20},{wch:20},{wch:20}]);const r=[["B\xc1O C\xc1O CHI TI\u1ebeT"],["Xu\u1ea5t ng\xe0y: ".concat((new Date).toLocaleDateString("vi-VN"))],[""],["Th\u1eddi gian","Thu nh\u1eadp","Chi ti\xeau","Danh m\u1ee5c"],...h.labels.map(((e,t)=>[e,"".concat(h.income[t].toLocaleString("vi-VN")," VND"),"".concat(h.expenses[t].toLocaleString("vi-VN")," VND"),""])),["","","",""],...u.labels.map(((e,t)=>["","","".concat(u.expenses[t].toLocaleString("vi-VN")," VND"),e]))],i=B.Wp.aoa_to_sheet(r);if(i){i["!merges"]=[{s:{r:0,c:0},e:{r:0,c:3}},{s:{r:1,c:0},e:{r:1,c:3}}],i.A1={v:"B\xc1O C\xc1O CHI TI\u1ebeT",t:"s"},i.A1.s={font:{bold:!0,sz:16,color:{rgb:"67E6DC"}},alignment:{horizontal:"center"}},i.A2={v:"Xu\u1ea5t ng\xe0y: ".concat((new Date).toLocaleDateString("vi-VN")),t:"s"},i.A2.s={font:{sz:12,color:{rgb:"6B728E"}},alignment:{horizontal:"center"}},i.A4={v:"Th\u1eddi gian",t:"s"},i.B4={v:"Thu nh\u1eadp",t:"s"},i.C4={v:"Chi ti\xeau",t:"s"},i.D4={v:"Danh m\u1ee5c",t:"s"},i.A4.s={font:{bold:!0,sz:12,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"FF6F69"}},border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}}},alignment:{horizontal:"center"}},i.B4.s=(0,o.A)({},i.A4.s),i.C4.s=(0,o.A)({},i.A4.s),i.D4.s=(0,o.A)({},i.A4.s);for(let e=5;e<=r.length;e++){const t=r[e-3]||["","","",""];i["A".concat(e)]={v:t[0],t:"s"},i["B".concat(e)]={v:t[1],t:"s"},i["C".concat(e)]={v:t[2],t:"s"},i["D".concat(e)]={v:t[3],t:"s"},i["A".concat(e)].s={font:{sz:12,color:{rgb:"444444"}},alignment:{horizontal:"left"},border:{bottom:{style:"thin",color:{rgb:"D3D3D3"}}}},i["B".concat(e)].s={font:{sz:12,color:{rgb:"67E6DC"}},alignment:{horizontal:"right"},border:{bottom:{style:"thin",color:{rgb:"D3D3D3"}}}},i["C".concat(e)].s={font:{sz:12,color:{rgb:"FF6F69"}},alignment:{horizontal:"right"},border:{bottom:{style:"thin",color:{rgb:"D3D3D3"}}}},i["D".concat(e)].s={font:{sz:12,color:{rgb:"6B728E"}},alignment:{horizontal:"left"},border:{bottom:{style:"thin",color:{rgb:"D3D3D3"}}}}}i["!cols"]=[{wch:20},{wch:20},{wch:20},{wch:20}]}if(a&&B.Wp.book_append_sheet(t,a,"T\u1ed5ng quan"),i&&B.Wp.book_append_sheet(t,i,"Chi ti\u1ebft"),0===t.SheetNames.length)return console.error("Workbook is empty - No sheets were added."),void alert("Kh\xf4ng th\u1ec3 xu\u1ea5t file Excel: Workbook r\u1ed7ng.");B._h(t,"Bao_cao_tai_chinh.xlsx")}catch(J){var e;console.error("L\u1ed7i khi xu\u1ea5t b\xe1o c\xe1o:",J),k.A.isAxiosError(J)&&403===(null===(e=J.response)||void 0===e?void 0:e.status)?alert("Xu\u1ea5t b\xe1o c\xe1o y\xeau c\u1ea7u g\xf3i Premium ho\u1eb7c Pro. Vui l\xf2ng n\xe2ng c\u1ea5p!"):alert("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi xu\u1ea5t b\xe1o c\xe1o. Vui l\xf2ng th\u1eed l\u1ea1i sau.")}},startIcon:(0,r.jsx)(i,{}),sx:{background:"linear-gradient(45deg, #2563eb, #3b82f6)",color:"#fff"},children:"Xu\u1ea5t Excel"}),(0,r.jsx)(V,{variant:"contained",onClick:async()=>{if(!ne){oe(!0);try{const{default:e}=await n.e(7762).then(n.bind(n,37762)),{default:t}=await n.e(4857).then(n.bind(n,64857)),o=localStorage.getItem("token");if(!(await k.A.post("http://localhost:5000/api/reports/export",{},{headers:{Authorization:"Bearer ".concat(o)}})).data.success)return void alert("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n xu\u1ea5t b\xe1o c\xe1o. Vui l\xf2ng n\xe2ng c\u1ea5p g\xf3i d\u1ecbch v\u1ee5.");const a=new e({orientation:"portrait",unit:"mm",format:"a4",putOnlyUsedFonts:!0,compress:!0});a.setFont("helvetica","normal"),a.setFontSize(18),a.setTextColor(40,40,40),a.text("B\xe1o c\xe1o T\xe0i ch\xednh",105,15,{align:"center",charSpace:0}),a.setFontSize(14),a.setTextColor(33,150,243),a.text("T\u1ed5ng quan",10,30);let r=35;t(a,{startY:r,head:[["T\u1ed5ng thu nh\u1eadp","T\u1ed5ng chi ti\xeau","S\u1ed1 d\u01b0"]],body:[["".concat(l.income.toLocaleString("vi-VN")," VND"),"".concat(l.expenses.toLocaleString("vi-VN")," VND"),"".concat(l.balance.toLocaleString("vi-VN")," VND")]],theme:"grid",styles:{font:"helvetica",fontSize:10,textColor:[40,40,40],cellPadding:3,halign:"right",overflow:"linebreak"},headStyles:{fillColor:[33,150,243],textColor:[255,255,255],fontSize:11,halign:"center"},columnStyles:{0:{halign:"right"},1:{halign:"right"},2:{halign:"right"}},didDrawPage:e=>{r=e.cursor.y}}),a.setFontSize(14),a.setTextColor(255,87,34),a.text("Chi ti\u1ebft theo th\u1eddi gian",10,r+10),t(a,{startY:r+15,head:[["Th\u1eddi gian","Thu nh\u1eadp","Chi ti\xeau"]],body:h.labels.map(((e,t)=>[e,"".concat(h.income[t].toLocaleString("vi-VN")," VND"),"".concat(h.expenses[t].toLocaleString("vi-VN")," VND")])),theme:"grid",styles:{font:"helvetica",fontSize:10,textColor:[40,40,40],cellPadding:3,overflow:"linebreak"},headStyles:{fillColor:[255,87,34],textColor:[255,255,255],fontSize:11,halign:"center"},columnStyles:{0:{halign:"left"},1:{halign:"right"},2:{halign:"right"}},didDrawPage:e=>{r=e.cursor.y}}),a.setFontSize(14),a.setTextColor(107,114,142),a.text("Chi ti\u1ebft theo danh m\u1ee5c",10,r+10),t(a,{startY:r+15,head:[["Danh m\u1ee5c","Chi ti\xeau"]],body:u.labels.map(((e,t)=>[e,"".concat(u.expenses[t].toLocaleString("vi-VN")," VND")])),theme:"grid",styles:{font:"helvetica",fontSize:10,textColor:[40,40,40],cellPadding:3,overflow:"linebreak"},headStyles:{fillColor:[107,114,142],textColor:[255,255,255],fontSize:11,halign:"center"},columnStyles:{0:{halign:"left"},1:{halign:"right"}},didDrawPage:e=>{r=e.cursor.y}});const i=a.getNumberOfPages();for(let n=1;n<=i;n++)a.setPage(n),a.setFontSize(9),a.setTextColor(100,100,100),a.text("Xu\u1ea5t b\xe1o c\xe1o ng\xe0y: ".concat((new Date).toLocaleDateString("vi-VN")),10,287),a.text("Trang ".concat(n," / ").concat(i),190,287,{align:"right"});a.save("Bao_cao_tai_chinh.pdf")}catch(J){var e;console.error("L\u1ed7i khi xu\u1ea5t b\xe1o c\xe1o:",J),k.A.isAxiosError(J)&&403===(null===(e=J.response)||void 0===e?void 0:e.status)?alert("Xu\u1ea5t b\xe1o c\xe1o y\xeau c\u1ea7u g\xf3i Premium ho\u1eb7c Pro. Vui l\xf2ng n\xe2ng c\u1ea5p!"):alert("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi xu\u1ea5t b\xe1o c\xe1o. Vui l\xf2ng th\u1eed l\u1ea1i sau.")}finally{oe(!1)}}},startIcon:(0,r.jsx)(s,{}),disabled:ne,sx:{background:"linear-gradient(45deg, #2563eb, #3b82f6)",color:"#fff"},children:ne?"\u0110ang xu\u1ea5t PDF...":"Xu\u1ea5t PDF"})]}):(0,r.jsx)(V,{variant:"contained",onClick:()=>e("/subscription"),sx:{background:"linear-gradient(45deg, #2563eb, #3b82f6)",color:"#fff"},children:"N\xe2ng c\u1ea5p ngay"})})]})]}),(0,r.jsxs)(m.Ay,{item:!0,xs:12,md:8,children:[(0,r.jsxs)(N,{sx:{height:"400px"},children:[(0,r.jsx)(W,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:600,mb:2},children:"Bi\u1ec3u \u0111\u1ed3 Thu - Chi"}),(0,r.jsx)(x.A,{sx:{height:"calc(100% - 40px)"},children:(0,r.jsx)(w.yP,{data:se,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:12},color:"dark"===t.palette.mode?"#e2e8f0":"#1e293b"}}},scales:{y:{ticks:{color:"dark"===t.palette.mode?"#94a3b8":"#64748b"},grid:{color:"dark"===t.palette.mode?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}},x:{ticks:{color:"dark"===t.palette.mode?"#94a3b8":"#64748b"},grid:{display:!1}}}}})})]}),(0,r.jsxs)(N,{sx:{mt:3,height:"400px"},children:[(0,r.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,r.jsx)(W,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:600},children:"Chi ti\xeau theo Danh m\u1ee5c"}),(0,r.jsxs)(f.A,{sx:{minWidth:200},children:[(0,r.jsx)(I,{children:"Danh m\u1ee5c"}),(0,r.jsxs)(L,{value:H,onChange:e=>{q(e.target.value)},children:[(0,r.jsx)(y.A,{value:"",children:"T\u1ea5t c\u1ea3"}),u.labels.map((e=>(0,r.jsx)(y.A,{value:e,children:e},e)))]})]})]}),(0,r.jsx)(x.A,{sx:{height:"calc(100% - 80px)",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(w.Fq,{data:le,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{font:{size:12},color:"dark"===t.palette.mode?"#e2e8f0":"#1e293b"}}}}})})]})]})]}),(0,r.jsxs)(E,{open:ee,onClose:()=>te(!1),children:[(0,r.jsx)(A.A,{sx:{fontSize:"1.5rem",color:"#444",textAlign:"center",fontWeight:600},children:"Th\xeam Giao d\u1ecbch M\u1edbi"}),(0,r.jsxs)(v.A,{children:[(0,r.jsxs)(f.A,{fullWidth:!0,sx:{mt:2},children:[(0,r.jsx)(I,{children:"Lo\u1ea1i"}),(0,r.jsxs)(g.A,{value:ae.type,onChange:e=>re((0,o.A)((0,o.A)({},ae),{},{type:e.target.value})),sx:{borderRadius:"10px",backgroundColor:"#f9f9f9"},children:[(0,r.jsx)(y.A,{value:"income",children:"Thu nh\u1eadp"}),(0,r.jsx)(y.A,{value:"expense",children:"Chi ti\xeau"})]})]}),(0,r.jsx)(C.A,{label:"S\u1ed1 ti\u1ec1n",type:"number",value:ae.amount,onChange:e=>re((0,o.A)((0,o.A)({},ae),{},{amount:Number(e.target.value)})),fullWidth:!0,sx:{mt:2,borderRadius:"10px",backgroundColor:"#f9f9f9"},InputProps:{inputProps:{min:0}}}),(0,r.jsxs)(f.A,{fullWidth:!0,sx:{mt:2},children:[(0,r.jsx)(I,{children:"Danh m\u1ee5c"}),(0,r.jsx)(g.A,{value:ae.category,onChange:e=>re((0,o.A)((0,o.A)({},ae),{},{category:e.target.value})),sx:{borderRadius:"10px",backgroundColor:"#f9f9f9"},children:["\u0102n u\u1ed1ng","Di chuy\u1ec3n","Mua s\u1eafm","L\u01b0\u01a1ng","Th\u01b0\u1edfng","Kh\xe1c"].map((e=>(0,r.jsx)(y.A,{value:e,children:e},e)))})]}),(0,r.jsx)(C.A,{label:"Ng\xe0y",type:"date",value:ae.date,onChange:e=>re((0,o.A)((0,o.A)({},ae),{},{date:e.target.value})),fullWidth:!0,sx:{mt:2,borderRadius:"10px",backgroundColor:"#f9f9f9"},InputLabelProps:{shrink:!0}})]}),(0,r.jsxs)(D.A,{sx:{justifyContent:"center",pb:2},children:[(0,r.jsx)(V,{onClick:()=>te(!1),sx:{background:"#B0BEC5","&:hover":{background:"#90A4AE"}},children:"H\u1ee7y"}),(0,r.jsx)(V,{onClick:async()=>{try{if(ae.amount<=0)return void alert("S\u1ed1 ti\u1ec1n ph\u1ea3i l\u1edbn h\u01a1n 0.");const e=localStorage.getItem("token"),t={type:ae.type,amount:Number(ae.amount),category:ae.category,date:new Date(ae.date).toISOString(),description:"",paymentMethod:"Ti\u1ec1n m\u1eb7t",status:"completed"};await k.A.post("http://localhost:5000/api/transactions",t,{headers:{Authorization:"Bearer ".concat(e)}}),ie(),te(!1)}catch(J){var t;console.error("\u274c L\u1ed7i khi th\xeam giao d\u1ecbch:",J),alert("\u0110\xe3 x\u1ea3y ra l\u1ed7i. Vui l\xf2ng th\u1eed l\u1ea1i sau."),k.A.isAxiosError(J)&&401===(null===(t=J.response)||void 0===t?void 0:t.status)&&e("/login")}},sx:{background:"#FF5722","&:hover":{background:"#E64A19"}},children:"L\u01b0u"})]})]})]})}}}]);
//# sourceMappingURL=5786.ed23d8c7.chunk.js.map