"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[4956],{83560:(e,r,o)=>{o.d(r,{A:()=>n});var i=o(59662),a=o(70579);const n=(0,i.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},84956:(e,r,o)=>{o.r(r),o.d(r,{default:()=>H});var i=o(89379),a=o(59662),n=o(70579);const t=(0,a.A)((0,n.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var s=o(83560),l=o(90035),d=o(56258),c=o(26600),h=o(35316),p=o(67784),x=o(29347),b=o(11906),g=o(54669),f=o(24056),m=o(96446),u=o(85865),y=o(68903),A=o(81045),v=o(81637),j=o(26240),w=o(12110),k=o(26494),S=o(17392),P=o(35721),C=o(30681),T=o(48734),W=o(40794),z=o(14194),R=o(55487),F=o(65043),M=o(29066),L=o(84033);const V=["/assets/avatars/chibi-1.png","/assets/avatars/chibi-2.png","/assets/avatars/chibi-3.png","/assets/avatars/chibi-4.png","/assets/avatars/chibi-5.png","/assets/avatars/chibi-6.png","/assets/avatars/chibi-7.png","/assets/avatars/chibi-8.png","/assets/avatars/chibi-9.png"],I=e=>{let{open:r,title:o,fieldName:i,currentValue:a,onClose:t,onSave:s}=e;const[g,f]=(0,F.useState)(a),[m,u]=(0,F.useState)("");(0,F.useEffect)((()=>{f(a),u("")}),[a]);return(0,n.jsx)(R.P.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",stiffness:400,damping:30},children:(0,n.jsxs)(l.A,{open:r,onClose:t,TransitionComponent:d.A,transitionDuration:600,PaperProps:{sx:{width:"100%",maxWidth:"400px",borderRadius:"20px",overflow:"hidden"}},children:[(0,n.jsx)(c.A,{sx:{background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",color:"white",py:2,px:3,fontFamily:"Poppins, sans-serif",fontWeight:700,fontSize:"1.2rem",letterSpacing:"0.5px",position:"relative","&:before":{content:'""',position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%)",animation:"glow 5s infinite"},"@keyframes glow":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.2)"},"100%":{transform:"scale(1)"}}},children:o}),(0,n.jsx)(h.A,{sx:{bgcolor:"rgba(245, 247, 255, 0.95)",py:3,px:4,background:"linear-gradient(180deg, rgba(245,247,255,0.95) 0%, rgba(230,235,255,0.95) 100%)",backdropFilter:"blur(10px)"},children:(0,n.jsx)(p.A,{autoFocus:!0,margin:"dense",label:i,type:"Email"===i?"email":"text",fullWidth:!0,value:g,onChange:e=>f(e.target.value),variant:"outlined",error:!!m,helperText:m,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px",bgcolor:"white",boxShadow:"0 4px 15px rgba(0,0,0,0.05)",border:"1px solid rgba(99,102,241,0.2)",fontSize:"0.9rem",height:"40px","&:hover fieldset":{borderColor:"#6366f1"},"&.Mui-focused fieldset":{borderColor:"#6366f1",boxShadow:"0 0 10px rgba(99,102,241,0.3)"}},"& .MuiInputLabel-root":{fontFamily:"Poppins, sans-serif",color:"#6b7280",fontWeight:500,fontSize:"0.9rem"},"& .MuiInputLabel-root.Mui-focused":{color:"#6366f1"}}})}),(0,n.jsxs)(x.A,{sx:{bgcolor:"rgba(245, 247, 255, 0.95)",px:4,py:2,borderTop:"1px solid rgba(99,102,241,0.1)"},children:[(0,n.jsx)(b.A,{onClick:t,sx:{fontFamily:"Poppins, sans-serif",color:"#6b7280",px:2,py:1,borderRadius:"8px",fontSize:"0.9rem","&:hover":{bgcolor:"rgba(99,102,241,0.1)",color:"#6366f1",transform:"translateY(-1px)"}},children:"H\u1ee7y"}),(0,n.jsx)(R.P.div,{whileHover:{scale:1.05,rotate:2},whileTap:{scale:.95},children:(0,n.jsx)(b.A,{onClick:async()=>{if(g.trim())if("Email"!==i||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g))try{await s(g),t()}catch(o){var e,r;u((null===(e=o.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"L\u1ed7i khi c\u1eadp nh\u1eadt")}else u("Email kh\xf4ng h\u1ee3p l\u1ec7");else u("".concat(i," kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"))},variant:"contained",sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #6366f1 0%, #a855f7 100%)",borderRadius:"8px",px:3,py:1,boxShadow:"0 6px 20px rgba(99,102,241,0.4)",fontSize:"0.9rem","&:hover":{background:"linear-gradient(45deg, #a855f7 0%, #6366f1 100%)",boxShadow:"0 8px 25px rgba(99,102,241,0.5)"},"&:before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(120deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"shine 2s infinite"},"@keyframes shine":{"0%":{left:"-100%"},"20%":{left:"100%"},"100%":{left:"100%"}}},children:"L\u01b0u"})})]})]})})},B=e=>{let{open:r,onClose:o}=e;const[a,t]=(0,F.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[s,g]=(0,F.useState)("");return(0,n.jsx)(R.P.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",stiffness:400,damping:30},children:(0,n.jsxs)(l.A,{open:r,onClose:o,TransitionComponent:d.A,transitionDuration:600,PaperProps:{sx:{width:"100%",maxWidth:"400px",borderRadius:"20px",overflow:"hidden"}},children:[(0,n.jsx)(c.A,{sx:{background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",color:"white",py:2,px:3,fontFamily:"Poppins, sans-serif",fontWeight:700,fontSize:"1.2rem",letterSpacing:"0.5px",position:"relative","&:before":{content:'""',position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%)",animation:"glow 5s infinite"}},children:"\u0110\u1ed5i M\u1eadt Kh\u1ea9u"}),(0,n.jsx)(h.A,{sx:{bgcolor:"rgba(245, 247, 255, 0.95)",py:3,px:4,background:"linear-gradient(180deg, rgba(245,247,255,0.95) 0%, rgba(230,235,255,0.95) 100%)",backdropFilter:"blur(10px)"},children:["M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i","M\u1eadt kh\u1ea9u m\u1edbi","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u"].map(((e,r)=>(0,n.jsx)(p.A,{margin:"dense",label:e,type:"password",fullWidth:!0,value:0===r?a.currentPassword:1===r?a.newPassword:a.confirmPassword,onChange:e=>t((0,i.A)((0,i.A)({},a),{},{[0===r?"currentPassword":1===r?"newPassword":"confirmPassword"]:e.target.value})),variant:"outlined",error:2===r&&!!s,helperText:2===r&&s,sx:{mb:1.5,"& .MuiOutlinedInput-root":{borderRadius:"12px",bgcolor:"white",boxShadow:"0 4px 15px rgba(0,0,0,0.05)",border:"1px solid rgba(99,102,241,0.2)",fontSize:"0.9rem",height:"40px","&:hover fieldset":{borderColor:"#6366f1"},"&.Mui-focused fieldset":{borderColor:"#6366f1",boxShadow:"0 0 10px rgba(99,102,241,0.3)"}},"& .MuiInputLabel-root":{fontFamily:"Poppins, sans-serif",color:"#6b7280",fontWeight:500,fontSize:"0.9rem"},"& .MuiInputLabel-root.Mui-focused":{color:"#6366f1"}}},r)))}),(0,n.jsxs)(x.A,{sx:{bgcolor:"rgba(245, 247, 255, 0.95)",px:4,py:2,borderTop:"1px solid rgba(99,102,241,0.1)"},children:[(0,n.jsx)(b.A,{onClick:o,sx:{fontFamily:"Poppins, sans-serif",color:"#6b7280",px:2,py:1,borderRadius:"8px",fontSize:"0.9rem","&:hover":{bgcolor:"rgba(99,102,241,0.1)",color:"#6366f1",transform:"translateY(-1px)"}},children:"H\u1ee7y"}),(0,n.jsx)(R.P.div,{whileHover:{scale:1.05,rotate:2},whileTap:{scale:.95},children:(0,n.jsx)(b.A,{onClick:async()=>{if(a.currentPassword&&a.newPassword&&a.confirmPassword)if(a.newPassword===a.confirmPassword)if(a.newPassword.length<6)g("M\u1eadt kh\u1ea9u c\u1ea7n \xedt nh\u1ea5t 6 k\xfd t\u1ef1");else try{await L.A.put("/api/auth/change-password",{currentPassword:a.currentPassword,newPassword:a.newPassword}),t({currentPassword:"",newPassword:"",confirmPassword:""}),g(""),o()}catch(s){var e,r;g((null===(e=s.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"L\u1ed7i khi \u0111\u1ed5i m\u1eadt kh\u1ea9u")}else g("M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp");else g("Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7")},variant:"contained",sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #6366f1 0%, #a855f7 100%)",borderRadius:"8px",px:3,py:1,boxShadow:"0 6px 20px rgba(99,102,241,0.4)",fontSize:"0.9rem","&:hover":{background:"linear-gradient(45deg, #a855f7 0%, #6366f1 100%)",boxShadow:"0 8px 25px rgba(99,102,241,0.5)"},"&:before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(120deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"shine 2s infinite"}},children:"\u0110\u1ed5i"})})]})]})})},E=e=>{let{open:r,onClose:o,onSave:i}=e;const[a,s]=(0,F.useState)(null),[d,p]=(0,F.useState)(null),[j,w]=(0,F.useState)(!1),[k,S]=(0,F.useState)(0);return(0,n.jsxs)(l.A,{open:r,onClose:o,maxWidth:"md",PaperProps:{sx:{width:"100%",maxWidth:"600px",borderRadius:"24px",overflow:"hidden",background:"linear-gradient(180deg, rgba(255,255,255,0.95) 0%, rgba(243,244,255,0.95) 100%)",boxShadow:"0 20px 60px rgba(0,0,0,0.2), 0 10px 25px rgba(99,102,241,0.3)",border:"1px solid rgba(255,255,255,0.8)"}},children:[(0,n.jsx)(c.A,{sx:{background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",color:"white",py:2.5,px:3,fontFamily:"Poppins, sans-serif",fontWeight:700,fontSize:"1.2rem",textAlign:"center",position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"10%",width:"80%",height:"3px",background:"rgba(255,255,255,0.5)",borderRadius:"3px"}},children:"Thay \u0110\u1ed5i Avatar"}),(0,n.jsxs)(h.A,{sx:{py:3,px:{xs:2,sm:4}},children:[(0,n.jsxs)(g.A,{value:k,onChange:(e,r)=>S(r),centered:!0,sx:{mb:3,"& .MuiTabs-indicator":{backgroundColor:"#a855f7",height:"3px",borderRadius:"3px"},"& .MuiTab-root":{fontFamily:"Poppins, sans-serif",fontWeight:600,fontSize:"0.95rem",color:"#6b7280",textTransform:"none","&.Mui-selected":{color:"#6366f1"}}},children:[(0,n.jsx)(f.A,{label:"Avatar Chibi"}),(0,n.jsx)(f.A,{label:"T\u1ea3i l\xean"})]}),0===k&&(0,n.jsxs)(m.A,{children:[(0,n.jsx)(u.A,{variant:"h6",sx:{mb:2,fontFamily:"Poppins, sans-serif",fontWeight:600,color:"#6366f1",textAlign:"center"},children:"Ch\u1ecdn Avatar Chibi"}),(0,n.jsx)(y.Ay,{container:!0,spacing:2,justifyContent:"center",children:V.map(((e,r)=>(0,n.jsx)(y.Ay,{item:!0,xs:4,sm:4,md:4,sx:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(R.P.div,{whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},animate:a===e?{y:[-5,0,-5],transition:{repeat:1/0,duration:1.5}}:{},children:(0,n.jsx)(A.A,{src:e,sx:{width:80,height:80,cursor:"pointer",border:a===e?"3px solid #a855f7":"3px solid transparent",boxShadow:a===e?"0 0 15px rgba(168,85,247,0.6)":"0 5px 15px rgba(0,0,0,0.1)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 25px rgba(99,102,241,0.5)"}},onClick:()=>{s(e),p(null)}})})},r)))})]}),1===k&&(0,n.jsxs)(m.A,{sx:{textAlign:"center"},children:[(0,n.jsx)(u.A,{variant:"h6",sx:{mb:3,fontFamily:"Poppins, sans-serif",fontWeight:600,color:"#6366f1"},children:"T\u1ea3i l\xean t\u1eeb m\xe1y c\u1ee7a b\u1ea1n"}),(0,n.jsxs)(m.A,{sx:{border:"2px dashed #d1d5db",borderRadius:"16px",p:3,mb:3,bgcolor:"rgba(243,244,255,0.7)",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",transition:"all 0.3s ease","&:hover":{borderColor:"#6366f1",bgcolor:"rgba(243,244,255,0.9)"}},component:"label",children:[a&&d?(0,n.jsx)(m.A,{sx:{mb:2},children:(0,n.jsx)(R.P.div,{whileHover:{scale:1.05,rotate:5},children:(0,n.jsx)(A.A,{src:a,sx:{width:120,height:120,boxShadow:"0 8px 25px rgba(0,0,0,0.2)",border:"3px solid #a855f7"}})})}):(0,n.jsx)(t,{sx:{fontSize:60,color:"#6366f1",mb:2}}),(0,n.jsx)(u.A,{sx:{fontFamily:"Poppins, sans-serif",color:"#6b7280",mb:1},children:d?d.name:"K\xe9o th\u1ea3 ho\u1eb7c nh\u1ea5n \u0111\u1ec3 ch\u1ecdn file"}),(0,n.jsx)(b.A,{variant:"outlined",component:"span",sx:{borderRadius:"12px",color:"#6366f1",borderColor:"#6366f1","&:hover":{borderColor:"#a855f7",bgcolor:"rgba(99,102,241,0.1)"}},children:"Ch\u1ecdn file"}),(0,n.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&(p(e.target.files[0]),s(URL.createObjectURL(e.target.files[0])))}})]}),d&&(0,n.jsxs)(u.A,{variant:"caption",sx:{display:"block",color:"#6b7280",mt:-2,mb:2},children:["\u0110\xe3 ch\u1ecdn: ",d.name," (",(d.size/1024).toFixed(1)," KB)"]})]})]}),(0,n.jsxs)(x.A,{sx:{px:4,py:3,justifyContent:"center",borderTop:"1px solid rgba(99,102,241,0.1)"},children:[(0,n.jsx)(b.A,{onClick:o,disabled:j,sx:{fontFamily:"Poppins, sans-serif",color:"#6b7280",px:3,py:1.2,borderRadius:"10px",fontSize:"0.9rem","&:hover":{bgcolor:"rgba(99,102,241,0.1)",color:"#6366f1"}},children:"H\u1ee7y"}),(0,n.jsx)(R.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,n.jsx)(b.A,{onClick:async()=>{if(d||a){w(!0);try{if(d){const e=new FormData;e.append("avatar",d);const r=await L.A.post("/api/auth/upload-avatar",e,{headers:{"Content-Type":"multipart/form-data"}});i(r.data.avatarUrl)}else if(a){const e=await L.A.post("/api/auth/upload-avatar",{avatarUrl:a});i(e.data.avatarUrl)}o()}catch(e){console.error("L\u1ed7i khi upload avatar:",e)}finally{w(!1)}}},variant:"contained",disabled:!a||j,sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #6366f1 0%, #a855f7 100%)",borderRadius:"10px",px:3,py:1.2,boxShadow:"0 8px 20px rgba(99,102,241,0.4)",fontSize:"0.95rem",fontWeight:600,minWidth:"120px","&:hover":{background:"linear-gradient(45deg, #a855f7 0%, #6366f1 100%)",boxShadow:"0 10px 25px rgba(99,102,241,0.6)"},"&.Mui-disabled":{background:"#d1d5db",color:"#9ca3af"}},children:j?(0,n.jsx)(v.A,{size:24,sx:{color:"white"}}):"L\u01b0u"})})]})]})},H=()=>{(0,j.A)();const{isAuthenticated:e,user:r,loginWithGoogle:o,logout:a}=(0,M.A)(),[t,l]=(0,F.useState)(!0),[d,c]=(0,F.useState)(null),[h,p]=(0,F.useState)({open:!1,title:"",fieldName:"",currentValue:""}),[x,V]=(0,F.useState)(!1),[H,D]=(0,F.useState)(!1),[N,G]=(0,F.useState)([]),[U,K]=(0,F.useState)(0),[O,q]=(0,F.useState)(null),[X,Q]=(0,F.useState)(null);(0,F.useEffect)((()=>{try{const e=new URLSearchParams(window.location.search),r=e.get("token"),i=e.get("error");console.log("\ud83d\udce5 Tham s\u1ed1 URL:",{token:r,error:i}),r?o(r).then((()=>{console.log("\u2705 \u0110\u0103ng nh\u1eadp Google th\xe0nh c\xf4ng"),window.history.replaceState({},document.title,window.location.pathname)})).catch((e=>{console.error("\u274c \u0110\u0103ng nh\u1eadp Google th\u1ea5t b\u1ea1i:",e.message),q("\u0110\u0103ng nh\u1eadp Google th\u1ea5t b\u1ea1i: "+e.message)})):i&&(console.warn("\u26a0\ufe0f L\u1ed7i t\u1eeb Google OAuth:",i),q("OAuthFail"===i?"\u0110\u0103ng nh\u1eadp Google th\u1ea5t b\u1ea1i":"T\xe0i kho\u1ea3n b\u1ecb kh\xf3a"),window.history.replaceState({},document.title,window.location.pathname))}catch(e){console.error("\u274c L\u1ed7i trong useEffect (AccountInfo):",e.message),q("L\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh khi x\u1eed l\xfd \u0111\u0103ng nh\u1eadp Google: "+e.message)}}),[o]),(0,F.useEffect)((()=>{(async()=>{if(e)try{const[e,r]=await Promise.all([L.A.get("/api/auth/me"),L.A.get("/api/auth/edit-history")]);console.log("\ud83d\udce5 Th\xf4ng tin user:",e.data.user),console.log("\ud83d\udcdc L\u1ecbch s\u1eed ch\u1ec9nh s\u1eeda:",r.data),c(e.data.user),G(r.data)}catch(O){var r,o,i;console.error("\u274c L\u1ed7i khi l\u1ea5y th\xf4ng tin user:",O.message),q((null===(r=O.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||"Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin user"),401===(null===(i=O.response)||void 0===i?void 0:i.status)&&a()}finally{l(!1)}else l(!1)})()}),[e,a]);const Y=e=>{d&&p({open:!0,title:"Thay ".concat("name"===e?"T\xean":"Email"),fieldName:"name"===e?"T\xean":"Email",currentValue:d[e]||""})},_=e=>{const r=new Date(e);return new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)};return t?(0,n.jsx)(m.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,n.jsx)(v.A,{size:60,sx:{color:"#6366f1"}})}):e&&d?(0,n.jsxs)(m.A,{sx:{py:4,px:{xs:2,md:4},maxWidth:1200,mx:"auto"},children:[O&&(0,n.jsx)(m.A,{sx:{mb:3,p:2,borderRadius:2,bgcolor:"error.light"},children:(0,n.jsx)(u.A,{variant:"body2",sx:{color:"error.main"},children:O})}),(0,n.jsx)(u.A,{variant:"h4",component:"h1",sx:{mb:4,fontWeight:800,color:"#1f2937",fontFamily:"Poppins, sans-serif",textAlign:{xs:"center",md:"left"},fontSize:{xs:"1.8rem",md:"2.2rem"},background:"linear-gradient(135deg, #1f2937 0%, #4b5563 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Th\xf4ng Tin T\xe0i Kho\u1ea3n"}),(0,n.jsxs)(y.Ay,{container:!0,spacing:4,children:[(0,n.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,n.jsx)(R.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,n.jsx)(w.A,{sx:{borderRadius:"20px",overflow:"visible",boxShadow:"0 10px 30px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)",height:"100%",position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"30%",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",borderRadius:"20px 20px 0 0",zIndex:0}},children:(0,n.jsx)(k.A,{sx:{position:"relative",pt:7,pb:3,px:3,zIndex:1},children:(0,n.jsxs)(m.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsxs)(m.A,{sx:{position:"relative"},children:[(0,n.jsx)(A.A,{src:d.avatar,sx:{width:120,height:120,borderRadius:"50%",border:"4px solid white",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",mb:2,bgcolor:"#6366f1"}}),(0,n.jsx)(S.A,{onClick:()=>D(!0),sx:{position:"absolute",right:0,bottom:10,bgcolor:"white",boxShadow:"0 4px 10px rgba(0,0,0,0.15)","&:hover":{bgcolor:"#f3f4ff"}},children:(0,n.jsx)(s.A,{sx:{color:"#6366f1",fontSize:"1.2rem"}})})]}),(0,n.jsx)(u.A,{variant:"h5",sx:{fontWeight:700,color:"#1f2937",mb:.5,fontFamily:"Poppins, sans-serif",fontSize:"1.3rem"},children:d.name}),(0,n.jsx)(u.A,{variant:"body2",sx:{color:"#6b7280",mb:2,display:"flex",alignItems:"center",gap:.5},children:d.email}),(0,n.jsx)(m.A,{sx:{display:"inline-flex",alignItems:"center",px:2,py:.8,borderRadius:"10px",bgcolor:"admin"===d.role?"rgba(220,38,38,0.1)":"rgba(99,102,241,0.1)",mb:3},children:(0,n.jsx)(u.A,{variant:"body2",sx:{color:"admin"===d.role?"#dc2626":"#6366f1",fontWeight:600,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"admin"===d.role?"Qu\u1ea3n tr\u1ecb vi\xean":"Ng\u01b0\u1eddi d\xf9ng"})}),(0,n.jsx)(m.A,{sx:{width:"100%",mt:.5},children:(0,n.jsxs)(P.A,{children:[(0,n.jsx)(C.Ay,{secondaryAction:(0,n.jsx)(S.A,{edge:"end",onClick:()=>Y("name"),children:(0,n.jsx)(s.A,{sx:{color:"#6366f1",fontSize:"1.2rem"}})}),sx:{px:1,py:1.5,borderBottom:"1px solid #f3f4ff"},children:(0,n.jsx)(T.A,{primary:"T\xean",secondary:d.name,primaryTypographyProps:{fontWeight:600,color:"#4b5563",fontSize:"0.85rem"},secondaryTypographyProps:{color:"#6b7280"}})}),(0,n.jsx)(C.Ay,{secondaryAction:(0,n.jsx)(S.A,{edge:"end",onClick:()=>Y("email"),children:(0,n.jsx)(s.A,{sx:{color:"#6366f1",fontSize:"1.2rem"}})}),sx:{px:1,py:1.5,borderBottom:"1px solid #f3f4ff"},children:(0,n.jsx)(T.A,{primary:"Email",secondary:d.email,primaryTypographyProps:{fontWeight:600,color:"#4b5563",fontSize:"0.85rem"},secondaryTypographyProps:{color:"#6b7280"}})}),(0,n.jsx)(C.Ay,{sx:{px:1,py:1.5,borderBottom:"1px solid #f3f4ff"},children:(0,n.jsx)(T.A,{primary:"Tr\u1ea1ng th\xe1i",secondary:d.isLocked?"\u0110\xe3 kh\xf3a":"Ho\u1ea1t \u0111\u1ed9ng",primaryTypographyProps:{fontWeight:600,color:"#4b5563",fontSize:"0.85rem"},secondaryTypographyProps:{sx:{color:d.isLocked?"#dc2626":"#10b981",fontWeight:600}}})}),(0,n.jsx)(C.Ay,{sx:{px:1,py:1.5},children:(0,n.jsx)(T.A,{primary:"X\xe1c th\u1ef1c email",secondary:d.isVerified?"\u0110\xe3 x\xe1c th\u1ef1c":"Ch\u01b0a x\xe1c th\u1ef1c",primaryTypographyProps:{fontWeight:600,color:"#4b5563",fontSize:"0.85rem"},secondaryTypographyProps:{sx:{color:d.isVerified?"#10b981":"#f59e0b",fontWeight:600}}})})]})}),(0,n.jsx)(R.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},style:{width:"100%",marginTop:"16px"},children:(0,n.jsx)(b.A,{variant:"outlined",fullWidth:!0,onClick:()=>V(!0),sx:{borderRadius:"12px",py:1.2,color:"#6366f1",borderColor:"#6366f1",fontWeight:600,"&:hover":{borderColor:"#4f46e5",bgcolor:"rgba(99,102,241,0.04)"}},children:"\u0110\u1ed5i M\u1eadt Kh\u1ea9u"})})]})})})})}),(0,n.jsx)(y.Ay,{item:!0,xs:12,md:8,children:(0,n.jsx)(R.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,n.jsx)(w.A,{sx:{borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)"},children:(0,n.jsxs)(k.A,{sx:{p:0},children:[(0,n.jsxs)(g.A,{value:U,onChange:(e,r)=>K(r),sx:{borderBottom:1,borderColor:"divider",".MuiTabs-indicator":{backgroundColor:"#6366f1",height:3,borderRadius:"3px"}},children:[(0,n.jsx)(f.A,{label:"Th\xf4ng tin chi ti\u1ebft",sx:{fontFamily:"Poppins, sans-serif",fontWeight:600,color:0===U?"#6366f1":"#6b7280","&.Mui-selected":{color:"#6366f1"}}}),(0,n.jsx)(f.A,{label:"L\u1ecbch s\u1eed ch\u1ec9nh s\u1eeda",sx:{fontFamily:"Poppins, sans-serif",fontWeight:600,color:1===U?"#6366f1":"#6b7280","&.Mui-selected":{color:"#6366f1"}}})]}),0===U&&(0,n.jsxs)(m.A,{sx:{p:3},children:[(0,n.jsx)(u.A,{variant:"h6",sx:{mb:3,fontWeight:700,color:"#4b5563",fontFamily:"Poppins, sans-serif"},children:"Chi ti\u1ebft t\xe0i kho\u1ea3n"}),(0,n.jsxs)(P.A,{children:[(0,n.jsx)(C.Ay,{sx:{px:1,py:1.5,borderBottom:"1px solid #f3f4ff"},children:(0,n.jsx)(T.A,{primary:"ID t\xe0i kho\u1ea3n",secondary:d._id,primaryTypographyProps:{fontWeight:600,color:"#4b5563",fontSize:"0.9rem"},secondaryTypographyProps:{color:"#6b7280",fontSize:"0.85rem"}})}),(0,n.jsx)(C.Ay,{sx:{px:1,py:1.5,borderBottom:"1px solid #f3f4ff"},children:(0,n.jsx)(T.A,{primary:"Ng\xe0y t\u1ea1o t\xe0i kho\u1ea3n",secondary:_(d.createdAt),primaryTypographyProps:{fontWeight:600,color:"#4b5563",fontSize:"0.9rem"},secondaryTypographyProps:{color:"#6b7280",fontSize:"0.85rem"}})}),(0,n.jsx)(C.Ay,{sx:{px:1,py:1.5},children:(0,n.jsx)(T.A,{primary:"Ph\xe2n quy\u1ec1n",secondary:"admin"===d.role?"Qu\u1ea3n tr\u1ecb vi\xean":"Ng\u01b0\u1eddi d\xf9ng th\u01b0\u1eddng",primaryTypographyProps:{fontWeight:600,color:"#4b5563",fontSize:"0.9rem"},secondaryTypographyProps:{sx:{color:"admin"===d.role?"#dc2626":"#6366f1",fontWeight:500,fontSize:"0.85rem"}}})})]}),(0,n.jsx)(u.A,{variant:"h6",sx:{mt:4,mb:3,fontWeight:700,color:"#4b5563",fontFamily:"Poppins, sans-serif"},children:"B\u1ea3o m\u1eadt t\xe0i kho\u1ea3n"}),(0,n.jsxs)(y.Ay,{container:!0,spacing:3,children:[(0,n.jsx)(y.Ay,{item:!0,xs:12,sm:6,children:(0,n.jsx)(w.A,{sx:{bgcolor:d.isVerified?"rgba(16,185,129,0.1)":"rgba(245,158,11,0.1)",borderRadius:"16px",border:"1px solid ".concat(d.isVerified?"rgba(16,185,129,0.3)":"rgba(245,158,11,0.3)"),boxShadow:"none"},children:(0,n.jsxs)(k.A,{children:[(0,n.jsx)(u.A,{variant:"subtitle1",sx:{fontWeight:700,color:d.isVerified?"#10b981":"#f59e0b",mb:1},children:"X\xe1c th\u1ef1c email"}),(0,n.jsx)(u.A,{variant:"body2",sx:{color:"#4b5563",mb:1},children:d.isVerified?"Email c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c":"Vui l\xf2ng x\xe1c th\u1ef1c email c\u1ee7a b\u1ea1n"}),!d.isVerified&&(0,n.jsx)(b.A,{variant:"outlined",size:"small",sx:{mt:1,color:"#f59e0b",borderColor:"#f59e0b","&:hover":{borderColor:"#d97706",bgcolor:"rgba(245,158,11,0.04)"}},children:"G\u1eedi l\u1ea1i email x\xe1c th\u1ef1c"})]})})}),(0,n.jsx)(y.Ay,{item:!0,xs:12,sm:6,children:(0,n.jsx)(w.A,{sx:{bgcolor:"rgba(99,102,241,0.1)",borderRadius:"16px",border:"1px solid rgba(99,102,241,0.3)",boxShadow:"none"},children:(0,n.jsxs)(k.A,{children:[(0,n.jsx)(u.A,{variant:"subtitle1",sx:{fontWeight:700,color:"#6366f1",mb:1},children:"M\u1eadt kh\u1ea9u"}),(0,n.jsx)(u.A,{variant:"body2",sx:{color:"#4b5563",mb:1},children:"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u \u0111\u1ecbnh k\u1ef3 \u0111\u1ec3 b\u1ea3o v\u1ec7 t\xe0i kho\u1ea3n"}),(0,n.jsx)(b.A,{variant:"outlined",size:"small",onClick:()=>V(!0),sx:{mt:1,color:"#6366f1",borderColor:"#6366f1","&:hover":{borderColor:"#4f46e5",bgcolor:"rgba(99,102,241,0.04)"}},children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"})]})})})]})]}),1===U&&(0,n.jsxs)(m.A,{sx:{p:3},children:[(0,n.jsx)(u.A,{variant:"h6",sx:{mb:3,fontWeight:700,color:"#4b5563",fontFamily:"Poppins, sans-serif"},children:"L\u1ecbch s\u1eed thay \u0111\u1ed5i th\xf4ng tin"}),0===N.length?(0,n.jsx)(m.A,{sx:{textAlign:"center",py:6,color:"#6b7280",bgcolor:"rgba(243,244,255,0.7)",borderRadius:"16px"},children:(0,n.jsx)(u.A,{variant:"body1",children:"Ch\u01b0a c\xf3 thay \u0111\u1ed5i n\xe0o \u0111\u01b0\u1ee3c ghi nh\u1eadn"})}):(0,n.jsx)(P.A,{sx:{bgcolor:"rgba(243,244,255,0.3)",borderRadius:"16px",overflow:"hidden"},children:N.map((e=>(0,n.jsxs)(C.Ay,{sx:{flexDirection:"column",alignItems:"flex-start",borderBottom:"1px solid rgba(99,102,241,0.1)",p:2,"&:last-child":{borderBottom:"none"}},children:[(0,n.jsxs)(m.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%",mb:1},children:[(0,n.jsx)(u.A,{variant:"subtitle1",sx:{fontWeight:600,color:"#4b5563",fontSize:"0.95rem"},children:"name"===e.field?"T\xean":"email"===e.field?"Email":"avatar"===e.field?"Avatar":e.field}),(0,n.jsx)(u.A,{variant:"caption",sx:{color:"#6b7280",fontStyle:"italic"},children:_(e.updatedAt)})]}),(0,n.jsx)(m.A,{sx:{width:"100%"},children:(0,n.jsxs)(y.Ay,{container:!0,spacing:2,children:[(0,n.jsxs)(y.Ay,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(u.A,{variant:"caption",sx:{color:"#6b7280",display:"block",mb:.5},children:"Gi\xe1 tr\u1ecb c\u0169:"}),"avatar"===e.field?(0,n.jsx)(A.A,{src:e.oldValue,sx:{width:40,height:40,border:"1px solid #e5e7eb"}}):(0,n.jsx)(u.A,{variant:"body2",sx:{color:"#4b5563",bgcolor:"rgba(243,244,246,0.7)",p:1,borderRadius:"8px",wordBreak:"break-all"},children:e.oldValue||"(tr\u1ed1ng)"})]}),(0,n.jsxs)(y.Ay,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(u.A,{variant:"caption",sx:{color:"#6b7280",display:"block",mb:.5},children:"Gi\xe1 tr\u1ecb m\u1edbi:"}),"avatar"===e.field?(0,n.jsx)(A.A,{src:e.newValue,sx:{width:40,height:40,border:"1px solid #e5e7eb"}}):(0,n.jsx)(u.A,{variant:"body2",sx:{color:"#4b5563",bgcolor:"rgba(243,244,246,0.7)",p:1,borderRadius:"8px",wordBreak:"break-all"},children:e.newValue||"(tr\u1ed1ng)"})]})]})})]},e._id)))})]})]})})})})]}),(0,n.jsx)(I,{open:h.open,title:h.title,fieldName:h.fieldName,currentValue:h.currentValue,onClose:()=>p((0,i.A)((0,i.A)({},h),{},{open:!1})),onSave:async e=>{try{const r="T\xean"===h.fieldName?"name":"email";await L.A.put("/api/auth/update",{[r]:e});d&&c((0,i.A)((0,i.A)({},d),{},{[r]:e})),q(null);const o=await L.A.get("/api/auth/edit-history");G(o.data)}catch(O){var r,o;throw q((null===(r=O.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||"L\u1ed7i khi c\u1eadp nh\u1eadt"),O}}}),(0,n.jsx)(B,{open:x,onClose:()=>V(!1)}),(0,n.jsx)(E,{open:H,onClose:()=>D(!1),onSave:async e=>{try{await L.A.put("/api/auth/update",{avatar:e});const r="".concat(e,"?v=").concat(Date.now());d&&c((0,i.A)((0,i.A)({},d),{},{avatar:r})),q(null),Q("\ud83c\udf89 Avatar \u0111\xe3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!");const o=await L.A.get("/api/auth/edit-history");G(o.data)}catch(O){var r,o;console.error("L\u1ed7i khi c\u1eadp nh\u1eadt avatar:",O),q((null===(r=O.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||"L\u1ed7i khi c\u1eadp nh\u1eadt avatar")}}}),X&&(0,n.jsx)(W.A,{open:!!X,autoHideDuration:3e3,onClose:()=>Q(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,n.jsx)(z.A,{severity:"success",variant:"filled",sx:{fontFamily:"Poppins"},onClose:()=>Q(null),children:X})})]}):(0,n.jsxs)(m.A,{sx:{textAlign:"center",py:8,px:3},children:[(0,n.jsx)(u.A,{variant:"h5",sx:{mb:2,fontWeight:700,color:"#4b5563",fontFamily:"Poppins, sans-serif"},children:"B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp"}),(0,n.jsx)(u.A,{variant:"body1",sx:{mb:4,color:"#6b7280",maxWidth:500,mx:"auto"},children:"Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 xem v\xe0 qu\u1ea3n l\xfd th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n."}),O&&(0,n.jsx)(u.A,{variant:"body2",sx:{color:"error.main",mb:3,p:2,bgcolor:"error.light",borderRadius:2},children:O}),(0,n.jsx)(R.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,n.jsx)(b.A,{variant:"contained",onClick:()=>window.location.href="/login",sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #6366f1 0%, #a855f7 100%)",borderRadius:"10px",px:4,py:1.5,boxShadow:"0 8px 20px rgba(99,102,241,0.4)",fontSize:"1rem",fontWeight:600},children:"\u0110\u0103ng Nh\u1eadp"})})]})}}}]);
//# sourceMappingURL=4956.83f4dcac.chunk.js.map