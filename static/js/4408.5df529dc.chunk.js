"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[4408],{63471:(t,n,i)=>{var e=i(24994);n.A=void 0;var o=e(i(40039)),a=i(70579);n.A=(0,o.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},94408:(t,n,i)=>{i.r(n),i.d(n,{default:()=>S});var e=i(89379),o=i(63471),a=i(95540),s=i(96446),r=i(85865),c=i(11906),l=i(81637),h=i(14194),d=i(35721),x=i(30681),A=i(48734),g=i(17392),p=i(90035),m=i(26600),u=i(35316),f=i(67784),y=i(4598),j=i(29347),v=i(79722),b=i(55487),k=i(65043),w=i(73216),C=i(70579);const S=()=>{const t=(0,w.Zp)(),[n,i]=(0,k.useState)([]),[S,P]=(0,k.useState)(!0),[E,F]=(0,k.useState)(null),[z,T]=(0,k.useState)(!1),[B,_]=(0,k.useState)(null),[H,I]=(0,k.useState)({title:"",content:"",isActive:!1,recipients:[]}),L=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");const n=await v.A.get("/api/admin/notifications",{headers:{Authorization:"Bearer ".concat(t)}});i(n.data)}catch(E){console.error("L\u1ed7i t\u1ea3i th\xf4ng b\xe1o:",E),F("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch th\xf4ng b\xe1o.")}finally{P(!1)}};return(0,k.useEffect)((()=>{L()}),[]),(0,C.jsxs)(s.A,{sx:{p:{xs:2,sm:3,md:4},bgcolor:"#f0f4f8",minHeight:"calc(100vh - 64px)"},children:[(0,C.jsxs)(b.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,type:"spring",stiffness:200,damping:20},children:[(0,C.jsx)(r.A,{variant:"h4",gutterBottom:!0,sx:{fontFamily:"Poppins, sans-serif",fontWeight:"bold",color:"#1E3A8A"},children:"Qu\u1ea3n l\xfd th\xf4ng b\xe1o"}),(0,C.jsx)(c.A,{variant:"contained",onClick:()=>T(!0),sx:{mb:2,bgcolor:"#1976d2",color:"white"},children:"Th\xeam m\u1edbi th\xf4ng b\xe1o"})]}),S?(0,C.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,C.jsx)(l.A,{sx:{color:"#1E3A8A"}})}):E?(0,C.jsx)(h.A,{severity:"error",sx:{mb:2},children:E}):(0,C.jsx)(d.A,{children:n.length>0?n.map(((n,i)=>(0,C.jsx)(b.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*i,duration:.5},children:(0,C.jsxs)(x.Ay,{sx:{bgcolor:"white",mb:1,borderRadius:2,boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},children:[(0,C.jsx)(A.A,{primary:(0,C.jsx)(r.A,{variant:"h6",sx:{fontFamily:"Poppins, sans-serif",color:"#1E3A8A"},children:n.title}),secondary:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.A,{sx:{fontFamily:"Poppins, sans-serif",color:"#555",mt:.5},children:n.content}),(0,C.jsxs)(r.A,{variant:"caption",sx:{fontFamily:"Poppins, sans-serif",color:"#777",mt:.5},children:["\u0110\u01b0\u1ee3c t\u1ea1o b\u1edfi: ",n.createdBy.name," - ",new Date(n.createdAt).toLocaleString("vi-VN")]}),(0,C.jsxs)(r.A,{variant:"caption",sx:{fontFamily:"Poppins, sans-serif",color:n.isActive?"#2e7d32":"#d32f2f",mt:.5},children:["Tr\u1ea1ng th\xe1i: ",n.isActive?"\u0110ang hi\u1ec3n th\u1ecb":"\u1ea8n"]})]})}),(0,C.jsx)(g.A,{onClick:()=>{_(n),I(n),T(!0)},color:"primary",children:(0,C.jsx)(a.A,{})}),(0,C.jsx)(g.A,{onClick:()=>(async n=>{try{const i=localStorage.getItem("token");if(!i)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");await v.A.delete("/api/admin/notifications/".concat(n),{headers:{Authorization:"Bearer ".concat(i)}}),L(),t("/admin/notifications")}catch(E){console.error("L\u1ed7i x\xf3a th\xf4ng b\xe1o:",E),F("Kh\xf4ng th\u1ec3 x\xf3a th\xf4ng b\xe1o.")}})(n._id),color:"error",children:(0,C.jsx)(o.A,{})})]})},n._id))):(0,C.jsx)(r.A,{sx:{fontFamily:"Poppins, sans-serif",color:"#666",textAlign:"center"},children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o n\xe0o."})}),(0,C.jsxs)(p.A,{open:z,onClose:()=>{T(!1),_(null)},children:[(0,C.jsx)(m.A,{sx:{fontFamily:"Poppins, sans-serif",fontWeight:"bold",color:"#1E3A8A"},children:null!==B&&void 0!==B&&B._id?"Ch\u1ec9nh s\u1eeda th\xf4ng b\xe1o":"Th\xeam m\u1edbi th\xf4ng b\xe1o"}),(0,C.jsxs)(u.A,{children:[(0,C.jsx)(f.A,{fullWidth:!0,label:"Ti\xeau \u0111\u1ec1",value:H.title||"",onChange:t=>I((0,e.A)((0,e.A)({},H),{},{title:t.target.value})),sx:{mb:2}}),(0,C.jsx)(f.A,{fullWidth:!0,label:"N\u1ed9i dung",value:H.content||"",onChange:t=>I((0,e.A)((0,e.A)({},H),{},{content:t.target.value})),multiline:!0,rows:4,sx:{mb:2}}),(0,C.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,C.jsx)(r.A,{sx:{fontFamily:"Poppins, sans-serif"},children:"Hi\u1ec3n th\u1ecb gi\u1eefa m\xe0n h\xecnh:"}),(0,C.jsx)(y.A,{checked:H.isActive||!1,onChange:t=>I((0,e.A)((0,e.A)({},H),{},{isActive:t.target.checked})),color:"primary"})]})]}),(0,C.jsxs)(j.A,{children:[(0,C.jsx)(c.A,{onClick:()=>{T(!1),_(null),I({title:"",content:"",isActive:!1,recipients:[]})},sx:{color:"#777"},children:"H\u1ee7y"}),(0,C.jsx)(c.A,{onClick:async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("Token kh\xf4ng t\u1ed3n t\u1ea1i");null!==B&&void 0!==B&&B._id?await v.A.put("/api/admin/notifications/".concat(B._id),H,{headers:{Authorization:"Bearer ".concat(t)}}):await v.A.post("/api/admin/notifications",H,{headers:{Authorization:"Bearer ".concat(t)}}),T(!1),_(null),I({title:"",content:"",isActive:!1,recipients:[]}),L()}catch(E){console.error("L\u1ed7i x\u1eed l\xfd th\xf4ng b\xe1o:",E),F("Kh\xf4ng th\u1ec3 x\u1eed l\xfd th\xf4ng b\xe1o.")}},variant:"contained",color:"primary",sx:{bgcolor:"#1976d2",color:"white"},children:null!==B&&void 0!==B&&B._id?"C\u1eadp nh\u1eadt":"Th\xeam m\u1edbi"})]})]})]})}},95540:(t,n,i)=>{var e=i(24994);n.A=void 0;var o=e(i(40039)),a=i(70579);n.A=(0,o.default)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=4408.5df529dc.chunk.js.map