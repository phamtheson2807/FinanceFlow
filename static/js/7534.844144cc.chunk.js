"use strict";(self.webpackChunkquanlythuchi=self.webpackChunkquanlythuchi||[]).push([[7534],{12110:(e,t,n)=>{n.d(t,{A:()=>f});var s=n(58168),o=n(98587),i=n(65043),a=n(58387),r=n(98610),l=n(34535),c=n(98206),d=n(63336),p=n(92532),x=n(72372);function h(e){return(0,x.Ay)("MuiCard",e)}(0,p.A)("MuiCard",["root"]);var m=n(70579);const u=["className","raised"],g=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),f=i.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiCard"}),{className:i,raised:l=!1}=n,d=(0,o.A)(n,u),p=(0,s.A)({},n,{raised:l}),x=(e=>{const{classes:t}=e;return(0,r.A)({root:["root"]},h,t)})(p);return(0,m.jsx)(g,(0,s.A)({className:(0,a.A)(x.root,i),elevation:l?8:void 0,ref:t,ownerState:p},d))}))},26494:(e,t,n)=>{n.d(t,{A:()=>g});var s=n(58168),o=n(98587),i=n(65043),a=n(58387),r=n(98610),l=n(34535),c=n(98206),d=n(92532),p=n(72372);function x(e){return(0,p.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var h=n(70579);const m=["className","component"],u=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),g=i.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiCardContent"}),{className:i,component:l="div"}=n,d=(0,o.A)(n,m),p=(0,s.A)({},n,{component:l}),g=(e=>{const{classes:t}=e;return(0,r.A)({root:["root"]},x,t)})(p);return(0,h.jsx)(u,(0,s.A)({as:l,className:(0,a.A)(g.root,i),ownerState:p,ref:t},d))}))},87534:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var s=n(95971),o=n(26240),i=n(96446),a=n(81637),r=n(85865),l=n(11906),c=n(68903),d=n(12110),p=n(26494),x=n(30344),h=n(79722),m=n(55487),u=n(65043),g=n(11238),f=n(89379),y=n(17304),A=n(70579);y.t1.register(y.PP,y.kc,y.E8,y.hE,y.m_,y.s$,y.FN,y.No);const v=e=>{let{data:t,options:n}=e;const s=(0,o.A)(),i=(0,u.useRef)(null),a=(0,u.useRef)(null);return(0,u.useEffect)((()=>{var e,o,r,l,c,d,p,x,h,m;i.current&&(a.current&&a.current.destroy(),a.current=new y.t1(i.current,{type:"line",data:t,options:(0,f.A)((0,f.A)({},n),{},{plugins:(0,f.A)((0,f.A)({},n.plugins),{},{title:(0,f.A)((0,f.A)({},null===(e=n.plugins)||void 0===e?void 0:e.title),{},{color:s.palette.text.primary}),legend:(0,f.A)((0,f.A)({},null===(o=n.plugins)||void 0===o?void 0:o.legend),{},{labels:(0,f.A)((0,f.A)({},null===(r=n.plugins)||void 0===r||null===(l=r.legend)||void 0===l?void 0:l.labels),{},{color:s.palette.text.secondary})})}),scales:(0,f.A)((0,f.A)({},n.scales),{},{x:(0,f.A)((0,f.A)({},null===(c=n.scales)||void 0===c?void 0:c.x),{},{ticks:(0,f.A)((0,f.A)({},null===(d=n.scales)||void 0===d||null===(p=d.x)||void 0===p?void 0:p.ticks),{},{color:s.palette.text.secondary,font:{family:"Poppins, sans-serif"}})}),y:(0,f.A)((0,f.A)({},null===(x=n.scales)||void 0===x?void 0:x.y),{},{ticks:(0,f.A)((0,f.A)({},null===(h=n.scales)||void 0===h||null===(m=h.y)||void 0===m?void 0:m.ticks),{},{color:s.palette.text.secondary,font:{family:"Poppins, sans-serif"}})})})})}));return()=>{a.current&&a.current.destroy()}}),[t,n,s]),(0,A.jsx)("canvas",{ref:i})},b=()=>{const e=(0,o.A)(),[t,n]=(0,u.useState)(null),[f,y]=(0,u.useState)(!0),[b,j]=(0,u.useState)(null),w=(0,x.A)(e.breakpoints.down("sm"));(0,u.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)throw new Error("B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 xem th\u1ed1ng k\xea.");const t=await h.A.get("http://localhost:5000/api/admin/analytics",{headers:{Authorization:"Bearer ".concat(e)}});n(t.data)}catch(b){var e,t;console.error("\u274c L\u1ed7i khi l\u1ea5y th\u1ed1ng k\xea:",b),j(h.A.isAxiosError(b)&&(null===(e=b.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Kh\xf4ng th\u1ec3 t\u1ea3i th\u1ed1ng k\xea. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{y(!1)}})()}),[]);if(f)return(0,A.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 64px)"},children:(0,A.jsxs)(m.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,A.jsx)(a.A,{size:40,sx:{color:e.palette.primary.main,[e.breakpoints.up("sm")]:{width:"60px !important",height:"60px !important"}}}),(0,A.jsx)(r.A,{sx:{mt:2,fontFamily:"Poppins, sans-serif",color:e.palette.text.secondary,fontSize:{xs:"0.9rem",sm:"1rem"}},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."})]})});const S=w?10:12;return(0,A.jsxs)(i.A,{sx:{p:{xs:2,sm:3,md:4},bgcolor:"#f5f7fa",minHeight:"calc(100vh - 64px)",overflowX:"hidden"},children:[(0,A.jsx)(m.P.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,type:"spring",stiffness:150,damping:20},children:(0,A.jsxs)(i.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:{xs:2,sm:4},gap:{xs:2,sm:0}},children:[(0,A.jsx)(r.A,{variant:"h4",sx:{fontFamily:"Poppins, sans-serif",fontWeight:700,color:"#1E3A8A",textShadow:"0 2px 6px rgba(0,0,0,0.1)",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"}},children:"Th\u1ed1ng K\xea H\u1ec7 Th\u1ed1ng"}),(0,A.jsx)(m.P.div,{whileHover:{scale:1.05},transition:{duration:.3},children:(0,A.jsx)(l.A,{variant:"contained",startIcon:(0,A.jsx)(s.A,{}),onClick:()=>{if(!t)return;const e=[["Th\u1ed1ng k\xea","Gi\xe1 tr\u1ecb"],["T\u1ed5ng s\u1ed1 ng\u01b0\u1eddi d\xf9ng",t.totalUsers],["T\u1ed5ng s\u1ed1 giao d\u1ecbch",t.totalTransactions],["T\u1ed5ng thu nh\u1eadp",t.totalIncome],["T\u1ed5ng chi ti\xeau",t.totalExpense]],n=[["Th\xe1ng","S\u1ed1 l\u01b0\u1ee3ng"],...t.usersByMonth.map((e=>[e.month,e.count]))],s=[["Th\xe1ng","S\u1ed1 l\u01b0\u1ee3ng"],...t.transactionsByMonth.map((e=>[e.month,e.count]))],o=g.Wp.book_new(),i=g.Wp.aoa_to_sheet(e),a=g.Wp.aoa_to_sheet(n),r=g.Wp.aoa_to_sheet(s);i["!cols"]=[{wch:20},{wch:15}],i.A1.s={font:{bold:!0}},i.B1.s={font:{bold:!0}},a["!cols"]=[{wch:15},{wch:12}],a.A1.s={font:{bold:!0}},a.B1.s={font:{bold:!0}},r["!cols"]=[{wch:15},{wch:12}],r.A1.s={font:{bold:!0}},r.B1.s={font:{bold:!0}},g.Wp.book_append_sheet(o,i,"T\u1ed5ng quan"),g.Wp.book_append_sheet(o,a,"Ng\u01b0\u1eddi d\xf9ng theo th\xe1ng"),g.Wp.book_append_sheet(o,r,"Giao d\u1ecbch theo th\xe1ng"),g._h(o,"BaoCao_ThongKe_".concat((new Date).toISOString().slice(0,10),".xlsx"))},disabled:!t,sx:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(45deg, #10B981, #047857)",borderRadius:"8px",px:{xs:2,sm:3},py:1,fontSize:{xs:"0.8rem",sm:"0.9rem"},boxShadow:"0 4px 15px rgba(0,0,0,0.1)","&:hover":{background:"linear-gradient(45deg, #34D399, #059669)"}},children:"Xu\u1ea5t b\xe1o c\xe1o Excel"})})]})}),b&&(0,A.jsx)(r.A,{sx:{color:e.palette.error.main,mb:{xs:2,sm:3},textAlign:"center",fontFamily:"Poppins, sans-serif",fontSize:{xs:"0.9rem",sm:"1rem"}},children:b}),(0,A.jsx)(c.Ay,{container:!0,spacing:{xs:2,sm:3},justifyContent:"center",children:[{label:"T\u1ed5ng ng\u01b0\u1eddi d\xf9ng",value:(null===t||void 0===t?void 0:t.totalUsers)||0,color:"#3B82F6"},{label:"T\u1ed5ng giao d\u1ecbch",value:(null===t||void 0===t?void 0:t.totalTransactions)||0,color:"#10B981"},{label:"T\u1ed5ng thu nh\u1eadp",value:(null===t||void 0===t?void 0:t.totalIncome)||0,color:"#F59E0B"},{label:"T\u1ed5ng chi ti\xeau",value:(null===t||void 0===t?void 0:t.totalExpense)||0,color:"#EF4444"}].map(((e,t)=>(0,A.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,A.jsx)(m.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.15*t,duration:.5,ease:"easeOut"},children:(0,A.jsx)(d.A,{elevation:4,sx:{bgcolor:e.color,color:"#fff",borderRadius:"12px",p:{xs:1.5,sm:2},height:{xs:"120px",sm:"140px"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}},children:(0,A.jsxs)(p.A,{sx:{textAlign:"center",p:0},children:[(0,A.jsx)(r.A,{variant:"body1",sx:{fontFamily:"Poppins, sans-serif",fontWeight:500,fontSize:{xs:"0.85rem",sm:"1rem"},mb:1},children:e.label}),(0,A.jsx)(r.A,{variant:"h5",sx:{fontFamily:"Poppins, sans-serif",fontWeight:700,fontSize:{xs:"1.2rem",sm:"1.5rem"}},children:e.label.includes("T\u1ed5ng thu")||e.label.includes("T\u1ed5ng chi")?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e.value):e.value})]})})})},t)))}),(0,A.jsxs)(c.Ay,{container:!0,spacing:{xs:2,sm:3},sx:{mt:{xs:2,sm:4}},children:[(0,A.jsx)(c.Ay,{item:!0,xs:12,children:(0,A.jsx)(m.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6,ease:"easeOut"},children:(0,A.jsx)(d.A,{elevation:3,sx:{bgcolor:"#fff",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",p:{xs:2,sm:3},height:{xs:"320px",sm:"400px"}},children:(0,A.jsxs)(p.A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,A.jsx)(r.A,{variant:"h6",sx:{fontFamily:"Poppins, sans-serif",fontWeight:600,color:"#1E3A8A",mb:2,textAlign:"center",fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Ng\u01b0\u1eddi d\xf9ng theo th\xe1ng"}),(0,A.jsx)(i.A,{sx:{flexGrow:1},children:(0,A.jsx)(v,{data:{labels:(null===t||void 0===t?void 0:t.usersByMonth.map((e=>e.month)))||[],datasets:[{label:"S\u1ed1 l\u01b0\u1ee3ng ng\u01b0\u1eddi d\xf9ng",data:(null===t||void 0===t?void 0:t.usersByMonth.map((e=>e.count)))||[],backgroundColor:["rgba(59, 130, 246, 0.5)"],borderColor:["rgba(59, 130, 246, 1)"],borderWidth:2,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{family:"Poppins, sans-serif",size:S}}},title:{display:!1}},scales:{x:{title:{display:!0,text:"Th\xe1ng",font:{family:"Poppins, sans-serif",size:S},color:e.palette.text.secondary},grid:{display:!1}},y:{title:{display:!0,text:"S\u1ed1 l\u01b0\u1ee3ng",font:{family:"Poppins, sans-serif",size:S},color:e.palette.text.secondary},beginAtZero:!0,grid:{color:"rgba(0,0,0,0.05)"}}}}})})]})})})}),(0,A.jsx)(c.Ay,{item:!0,xs:12,children:(0,A.jsx)(m.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6,ease:"easeOut"},children:(0,A.jsx)(d.A,{elevation:3,sx:{bgcolor:"#fff",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",p:{xs:2,sm:3},height:{xs:"320px",sm:"400px"}},children:(0,A.jsxs)(p.A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,A.jsx)(r.A,{variant:"h6",sx:{fontFamily:"Poppins, sans-serif",fontWeight:600,color:"#1E3A8A",mb:2,textAlign:"center",fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Giao d\u1ecbch theo th\xe1ng"}),(0,A.jsx)(i.A,{sx:{flexGrow:1},children:(0,A.jsx)(v,{data:{labels:(null===t||void 0===t?void 0:t.transactionsByMonth.map((e=>e.month)))||[],datasets:[{label:"S\u1ed1 l\u01b0\u1ee3ng giao d\u1ecbch",data:(null===t||void 0===t?void 0:t.transactionsByMonth.map((e=>e.count)))||[],backgroundColor:["rgba(16, 185, 129, 0.5)"],borderColor:["rgba(16, 185, 129, 1)"],borderWidth:2,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{family:"Poppins, sans-serif",size:S}}},title:{display:!1}},scales:{x:{title:{display:!0,text:"Th\xe1ng",font:{family:"Poppins, sans-serif",size:S},color:e.palette.text.secondary},grid:{display:!1}},y:{title:{display:!0,text:"S\u1ed1 l\u01b0\u1ee3ng",font:{family:"Poppins, sans-serif",size:S},color:e.palette.text.secondary},beginAtZero:!0,grid:{color:"rgba(0,0,0,0.05)"}}}}})})]})})})})]})]})}},95971:(e,t,n)=>{var s=n(24994);t.A=void 0;var o=s(n(40039)),i=n(70579);t.A=(0,o.default)((0,i.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp")}}]);
//# sourceMappingURL=7534.844144cc.chunk.js.map